(()=>{"use strict";var __webpack_modules__={199:(e,t,s)=>{s.d(t,{q:()=>i,z:()=>o});var n=s(360);let a=0;function i(e){a=e,(0,n.D)()}function o(){return a}},808:(e,t,s)=>{s.d(t,{$p:()=>w,$t:()=>H,C2:()=>p,Ck:()=>d,Gw:()=>g,Hf:()=>_,JY:()=>y,Kv:()=>E,UH:()=>x,VP:()=>m,_F:()=>v,cC:()=>B,eH:()=>l,iE:()=>b,iO:()=>S,rF:()=>f,t:()=>u,vf:()=>L,w7:()=>h});var n=s(268),a=s(878),i=s(199);let o=[];const c="messages.json",r=e=>{if(null===e)return!1;try{JSON.parse(e)}catch(e){return!1}return!0},l=e=>e.toLocaleString("en",{maximumFractionDigits:2}),d=e=>new Date(e).toLocaleString("en",{year:"2-digit",month:"2-digit",day:"2-digit"}),u=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let s in e)if(e.hasOwnProperty(s))if("object"==typeof e[s]){if(!u(e[s],t[s]))return!1}else if(e[s]!==t[s])return!1;return!0},m=(e,t)=>{let s=(0,n.U2)("ch_settings");s=r(s)?JSON.parse(s):{},Array.isArray(s)&&(s={...s}),s[e]=t,(0,n.t8)("ch_settings",JSON.stringify(s))},p=()=>0!==(0,i.z)(),h=()=>{f({},!0),m("operator_id",0),document.getElementById("bs-5").remove();const e=document.createElement("div");e.innerHTML=(0,a.AH)("../../assets/html/app/service.html"),document.body.appendChild(e)},f=(e,t=!1)=>{let s;t?s={}:(s=(0,n.U2)("ch_config"),s=r(s)?JSON.parse(s):{}),Object.keys(e).forEach((t=>{s[t]=e[t]})),Array.isArray(s)&&(s={...s}),(0,n.t8)("ch_config",JSON.stringify(s))};function _(e,t,s=!1){const a=(0,n.U2)("ch_config"),i=e.split(".");let o=JSON.parse(a),c={};const r=i[i.length-1];for(let e=0;e<i.length-1;e++){if(c=o[i[e]],!o)return}"object"==typeof c[r]?s?c[r]=t:c[r].push(t):c[r]=t,(0,n.t8)("ch_config",JSON.stringify(o))}const g=()=>{let e=(0,n.U2)("ch_settings");return e=r(e)?JSON.parse(e):{},e},b=()=>{let e=(0,n.U2)("ch_config");return e=r(e)?JSON.parse(e):{},e},y=(e,t,s)=>{let n;if("checkbox"===s)n=document.getElementById(e).querySelector('input[name="'+t+'"]').checked;else n=document.getElementById(e).querySelector('input[name="'+t+'"]').value;return n},v=(e,t,s,n)=>{switch(n){case"select":document.getElementById(e).querySelector('select[name="'+t+'"]').value=s;break;case"checkbox":document.getElementById(e).querySelector('input[name="'+t+'"]').checked=s;break;default:document.getElementById(e).querySelector('input[name="'+t+'"]').value=s}},E=e=>M(new Date(e),new Date);function M(e,t){let s=(0,n.U2)("locale");const a=Math.abs(e.getTime()-t.getTime()),i=Math.floor(a/1e3/60),o=Math.floor(i/60),c=Math.floor(o/24),r=Math.floor(c/7),l=Math.floor(c/30),d=Math.floor(c/365),u={en:{year:"year",month:"month",week:"week",day:"day",hour:"hour",minute:"minute",pluralize:(e,t)=>1===e?t:t+"s"},ru:{year:"г.",month:"мсц.",week:"нед.",day:"д.",hour:"ч.",minute:"мин.",pluralize:(e,t)=>t}},m=u[s]||u.en;return d>=1?`${d} ${m.pluralize(d,m.year)}`:l>=1?`${l} ${m.pluralize(l,m.month)}`:r>=1?`${r} ${m.pluralize(r,m.week)}`:c>=1?`${c} ${m.pluralize(c,m.day)}`:o>=1?`${o} ${m.pluralize(o,m.hour)}`:`${i} ${m.pluralize(i,m.minute)}`}function S(e,t=new Date){let s=(0,n.U2)("locale");const a=Math.abs(e.getTime()-t.getTime()),i=Math.floor(a/1e3/60),o=Math.floor(i/60),c=Math.floor(o/24),r={en:{day:"d",hour:"h",minute:"m"},ru:{day:"д",hour:"ч",minute:"мин"}},l=r[s]||r.en;return c>=1?`${c}${l.day}. ${o%24}${l.hour}.`:o>=1?`${o}${l.hour}. ${i%60}${l.minute}.`:`${i}${l.minute}.`}function w(){document.querySelectorAll(".ch-dropdown-content").forEach((e=>{e.classList.remove("show")}))}function L(e,t=!1,s=!1,n="new_post_text_input"){const a=document.querySelector(`#${n}`);if(!a)return;a.focus();const i=s?"":a.value||"";let o,c;if(t)o=`${i}${e}`,c=o.length;else{let t=a.selectionStart||0,s=a.selectionEnd||0;o=`${i.substring(0,t)}${e}${i.substring(s,i.length)}`,c=t+e.length}a.value=o,a.setSelectionRange(c,c),a.dispatchEvent(new Event("input",{bubbles:!0}))}window.onclick=function(e){if(!e.target.matches(".dropbtn")){let e,t=document.getElementsByClassName("ch-dropdown-content");for(e=0;e<t.length;e++){let s=t[e];s.classList.contains("show")&&s.classList.remove("show")}}};const k=e=>[...(new Intl.Segmenter).segment(e)].map((e=>e.segment));function B(e){let t,s=g();if(void 0!==s.settings&&void 0!==s.settings.emojis){if(null===s.settings.emojis||""===s.settings.emojis||0===s.settings.emojis.length)return;t=k(s.settings.emojis)}else t=["🥰","🍆","💦","😍","❤️","🤤","🔥","😈","😘","💗","🙈","🔞","😽","😹","😅","😪","😭","💞","🥺","🤐","🥵","😏","💕","🤝","😱","😉","🤬","👅","💋","😻","😼","🔥","💥","✨","💫","🍑","🍒","🍌","🍓"];if(0===t.length)return;let n='<div id="ch-emoji-bar" class="rounded"><div class="ch-emoji-bar-wrapper">';t.forEach((e=>{n+='<button class="ch-emoji-bar-button" type="button">'+e+"</button>"})),n+="</div></div>";const a=document.querySelector(".emoji-block");if(!a)return;a.insertAdjacentHTML("afterbegin",n);a.querySelectorAll(".ch-emoji-bar-button").forEach((t=>{t.addEventListener("click",(s=>{L(t.innerText,!1,!1,e)}))}))}function x(){const e=`_locales/${(0,n.U2)("locale")??"en"}/${c}`;o=(0,a.zr)(e),document.querySelectorAll("[data-locale-key]").forEach((e=>{const t=e.getAttribute("data-locale-key");var s;t in o&&(e.hasAttribute("data-set-title")||(s=o[t].message,/<[^>]+>/g.test(s)?e.innerHTML=o[t].message:e.innerText=o[t].message),e.hasAttribute("data-locale-placeholder")&&(e.placeholder=o[t].message),e.hasAttribute("data-set-title")&&(e.title=o[t].message))}))}const H=(e,t=null)=>e in o?t?o[e].message.replace(/\$\${(\w+)}/g,((e,s)=>t[s])):o[e].message:e},56:(e,t,s)=>{s.d(t,{S:()=>he,j:()=>me});var n=s(808),a=s(878),i=s(776),o=s(686),c=s(60);const r="ch_fans";let l=!0,d={last_data_load:{online:0,last_subscribers:0,last_comments:0,last_likes:0},fans_online:[],data_open:"online",last_fans_offset:0,last_fans_loaded:0,last_subscribers_offset:0,last_subscribers_loaded:0,last_comments_offset:0,last_comments_loaded:0,last_likes_offset:0,last_likes_loaded:0},u={online_fans_loading:!1,last_subscribers_loading:!1,last_comments_loading:!1,last_likes_loading:!1},m={};const p=async()=>{(0,i.K2)()&&(0,n.C2)()?(l&&(l=0,(0,a.Nj)(r,"fans.html"),document.getElementById("fansUpdateButton").addEventListener("click",(function(){h(!0)})),document.getElementById("onlineFansList").addEventListener("scroll",(function(){M()})),document.getElementById("lastSubscribersList").addEventListener("scroll",(function(){k()})),document.getElementById("lastCommentsList").addEventListener("scroll",(function(){L()})),document.getElementById("lastLikesList").addEventListener("scroll",(function(){w()})),document.getElementById("lastPurchases").addEventListener("scroll",(function(){S()})),document.getElementById("fansMenuOnline").addEventListener("click",(function(){(0,a.Yh)("#fansMenuDropdown",(0,n.$t)("fans_online")),d.data_open="online",(0,a.e6)("#lastSubscribersList"),(0,a.e6)("#lastCommentsList"),(0,a.e6)("#lastLikesList"),(0,a.e6)("#lastPurchases"),(0,a.V_)("#onlineFansList"),h()})),document.getElementById("fansMenuLastSubscribers").addEventListener("click",(function(){(0,a.Yh)("#fansMenuDropdown",(0,n.$t)("last_subscribers")),d.data_open="last_subscribers",(0,a.e6)("#onlineFansList"),(0,a.e6)("#lastCommentsList"),(0,a.e6)("#lastLikesList"),(0,a.e6)("#lastPurchases"),(0,a.V_)("#lastSubscribersList"),h()})),document.getElementById("fansMenuLastPurchases").addEventListener("click",(function(){(0,a.Yh)("#fansMenuDropdown",(0,n.$t)("last_purchases")),d.data_open="last_purchases",(0,a.e6)("#onlineFansList"),(0,a.e6)("#lastCommentsList"),(0,a.e6)("#lastLikesList"),(0,a.e6)("#lastSubscribersList"),(0,a.V_)("#lastPurchases"),h()})),document.getElementById("fansMenuLastComments").addEventListener("click",(function(){(0,a.Yh)("#fansMenuDropdown",(0,n.$t)("last_comments")),d.data_open="last_comments",(0,a.e6)("#onlineFansList"),(0,a.e6)("#lastSubscribersList"),(0,a.e6)("#lastLikesList"),(0,a.e6)("#lastPurchases"),(0,a.V_)("#lastCommentsList"),h()})),document.getElementById("fansMenuLastLikes").addEventListener("click",(function(){(0,a.Yh)("#fansMenuDropdown",(0,n.$t)("last_likes")),d.data_open="last_likes",(0,a.e6)("#onlineFansList"),(0,a.e6)("#lastSubscribersList"),(0,a.e6)("#lastCommentsList"),(0,a.e6)("#lastPurchases"),(0,a.V_)("#lastLikesList"),h()})),_()),(0,a.Ok)(r),h()):alert("Error! Need activate")};function h(e=!1){if(e||!(d.last_data_load[d.data_open]>Math.floor(Date.now()/1e3)-300)){switch(async function(){let e=await(0,o.W)("/api2/v2/subscriptions/subscribers/count?type=active&filter[online]=1","GET",null),t=await(0,o.W)("/api2/v2/subscriptions/count/all","GET",null);void 0===e.error&&(document.getElementById("onlineCount").innerHTML=e.count);void 0===t.error&&(document.getElementById("allFansCount").innerHTML=t.subscribers.active)}(),d.data_open){case"online":E(0);break;case"last_subscribers":v(0);break;case"last_comments":y(0);break;case"last_likes":b(0);break;case"last_purchases":g(0);break;default:return}d.last_data_load[d.data_open]=Math.floor(Date.now()/1e3)}}async function f(e){chrome.runtime.sendMessage({method:"change_route",args:[e]})}function _(){let e=(0,n.Gw)();m=e.onlinefans,void 0!==m&&void 0!==m.min_total_sum||(m={},m.min_total_sum=0,m.hide_creators=!1),document.getElementById("onlyFansSettingsButton").addEventListener("click",(function(e){e.stopImmediatePropagation(),(0,c.Sv)("setting","settings").then((e=>{document.getElementById("saveOnlyFansSettings").addEventListener("click",(function(){B()}));let t=e.id;(0,n._F)(`${t}`,"min_total_sum",m.min_total_sum),(0,n._F)(`${t}`,"hide_creators",m.hide_creators,"checkbox")})).catch((e=>{console.error(e)}))}))}const g=async e=>{if(e>200)return void(d.last_purchases_loaded=0);let t;if(u.last_purchases_loading=!0,0===e?document.getElementById("lastPurchases").innerHTML='<div class="d-flex justify-content-center card-loader"><div class="spinner-border m-5" role="status"><span class="visually-hidden">Loading...</span></div></div>':document.getElementById("lastPurchases").innerHTML+='<div class="d-flex justify-content-center card-loader"><div class="spinner-border m-5" role="status"><span class="visually-hidden">Loading...</span></div></div>',t=await(0,o.W)("/api2/v2/payouts/transactions?limit=20&offset="+e,"GET",null),0===e?document.getElementById("lastPurchases").innerHTML="":void 0!==document.getElementById("lastPurchases").getElementsByClassName("card-loader")[0]&&document.getElementById("lastPurchases").getElementsByClassName("card-loader")[0].remove(),d.last_purchases_loaded=t.list.length,d.last_purchases_offset=e,void 0===t.list||void 0!==t.error||0===t.list.length)return;let s=document.createElement("div");t.list.forEach((e=>{let t=`\n            <button \n                type="button" \n                class="btn btn-secondary btn-xs" \n                data-bs-toggle="popover" \n                data-bs-content="${(0,a.CB)(e.description).replace(/"/g,"'")}"\n            >\n                <i class="fa-regular fa-info-circle"></i>\n            </button>`;s.innerHTML+=`<div class="clearfix item p-2">\n            <div class="float-start me-1">\n                <a href="#" class="open-chat" data-user_id="${e.user.id}">\n                    <i class="fa fa-envelope"></i>\n                </a>\n            </div>\n            <div class="float-start">\n                <strong class="text-truncate d-block name1">\n                    ${e.user.name}\n                </strong>\n                <div>\n                    <span class="badge bg-success">${e.amount} ${e.currency}</span>\n                </div>\n            </div>\n            <div class="float-start mx-2">${t}</div>\n            <div class="float-end">\n                <small>\n                    <i class="fa-regular fa-clock"></i> ${(0,n.Kv)(e.createdAt)}\n                </small>\n            </div>\n        </div>`})),document.getElementById("lastPurchases").appendChild(s);document.getElementById("lastPurchases").querySelectorAll(".open-chat").forEach((e=>{e.removeEventListener("click",(()=>{})),e.addEventListener("click",(t=>(t.preventDefault(),f(e.dataset.user_id),!1)))})),u.last_purchases_loading=!1,(0,a.Yq)()},b=async e=>{if(e>200)return void(d.last_likes_loaded=0);let t;if(u.last_likes_loading=!0,0===e?document.getElementById("lastLikesList").innerHTML='<div class="d-flex justify-content-center card-loader"><div class="spinner-border m-5" role="status"><span class="visually-hidden">Loading...</span></div></div>':document.getElementById("lastLikesList").innerHTML+='<div class="d-flex justify-content-center card-loader"><div class="spinner-border m-5" role="status"><span class="visually-hidden">Loading...</span></div></div>',t=await(0,o.W)("/api2/v2/users/notifications?limit=20&offset="+e+"&type=favorited&skip_users=all&format=infinite","GET",null),0===e?document.getElementById("lastLikesList").innerHTML="":void 0!==document.getElementById("lastLikesList").getElementsByClassName("card-loader")[0]&&document.getElementById("lastLikesList").getElementsByClassName("card-loader")[0].remove(),d.last_likes_loaded=t.list.length,d.last_likes_offset=e,void 0===t.list||void 0!==t.error||0===t.list.length)return;let s=document.createElement("div");t.list.forEach((e=>{let t='<button type="button" class="btn btn-secondary btn-xs" data-bs-toggle="popover" data-bs-content="'+(0,a.CB)(e.text).replace(/"/g,"'")+'"><i class="fa-regular fa-heart"></i></button>';s.innerHTML+='<div class="clearfix item p-2">\n                            <div class="float-start me-1"><a href="#" class="open-chat" data-user_id="'+e.replacePairs["{RELATED_USER_ID}"]+'"><i class="fa fa-envelope"></i></a></div>\n                            <div class="float-start"><strong class="text-truncate d-block name1">'+e.replacePairs["{RELATED_USER_NAME}"]+'</strong></div>\n                            <div class="float-start mx-2">'+t+'</div>\n                            <div class="float-end"><small><i class="fa-regular fa-clock"></i> '+(0,n.Kv)(e.createdAt)+"</small></div>\n                        </div>"})),document.getElementById("lastLikesList").appendChild(s);document.getElementById("lastLikesList").querySelectorAll(".open-chat").forEach((e=>{e.removeEventListener("click",(()=>{})),e.addEventListener("click",(t=>(t.preventDefault(),f(e.dataset.user_id),!1)))})),u.last_likes_loading=!1,(0,a.Yq)()},y=async e=>{if(e>200)return void(d.last_comments_loaded=0);let t;if(u.last_comments_loading=!0,0===e?document.getElementById("lastCommentsList").innerHTML='<div class="d-flex justify-content-center card-loader"><div class="spinner-border m-5" role="status"><span class="visually-hidden">Loading...</span></div></div>':document.getElementById("lastCommentsList").innerHTML+='<div class="d-flex justify-content-center card-loader"><div class="spinner-border m-5" role="status"><span class="visually-hidden">Loading...</span></div></div>',t=await(0,o.W)("/api2/v2/users/notifications?limit=20&offset="+e+"&type=commented&skip_users=all&format=infinite","GET",null),0===e?document.getElementById("lastCommentsList").innerHTML="":void 0!==document.getElementById("lastCommentsList").getElementsByClassName("card-loader")[0]&&document.getElementById("lastCommentsList").getElementsByClassName("card-loader")[0].remove(),d.last_comments_loaded=t.list.length,d.last_comments_offset=e,void 0===t.list||void 0!==t.error||0===t.list.length)return;let s=document.createElement("div");t.list.forEach((e=>{let t='<button type="button" class="btn btn-secondary btn-xs" data-bs-toggle="popover" data-bs-content="'+(0,a.CB)(e.text).replace(/"/g,"'")+'"><i class="fa-regular fa-comment-dots"></i></button>';s.innerHTML+='<div class="clearfix item p-2">\n                            <div class="float-start me-1"><a href="#" class="open-chat" data-user_id="'+e.replacePairs["{RELATED_USER_ID}"]+'"><i class="fa fa-envelope"></i></a></div>\n                            <div class="float-start"><strong class="text-truncate d-block name1">'+e.replacePairs["{RELATED_USER_NAME}"]+'</strong></div>\n                            <div class="float-start mx-2">'+t+'</div>\n                            <div class="float-end"><small><i class="fa-regular fa-clock"></i> '+(0,n.Kv)(e.createdAt)+"</small></div>\n                        </div>"})),document.getElementById("lastCommentsList").appendChild(s);document.getElementById("lastCommentsList").querySelectorAll(".open-chat").forEach((e=>{e.removeEventListener("click",(()=>{})),e.addEventListener("click",(t=>(t.preventDefault(),f(e.dataset.user_id),!1)))})),u.last_comments_loading=!1,(0,a.Yq)()},v=async e=>{if(e>200)return void(d.last_subscribers_loaded=0);let t;if(u.last_subscribers_loading=!0,0===e?document.getElementById("lastSubscribersList").innerHTML='<div class="d-flex justify-content-center card-loader"><div class="spinner-border m-5" role="status"><span class="visually-hidden">Loading...</span></div></div>':document.getElementById("lastSubscribersList").innerHTML+='<div class="d-flex justify-content-center card-loader"><div class="spinner-border m-5" role="status"><span class="visually-hidden">Loading...</span></div></div>',t=await(0,o.W)("/api2/v2/users/notifications?limit=20&offset="+e+"&type=subscribed&skip_users=all&format=infinite","GET",null),0===e?document.getElementById("lastSubscribersList").innerHTML="":void 0!==document.getElementById("lastSubscribersList").getElementsByClassName("card-loader")[0]&&document.getElementById("lastSubscribersList").getElementsByClassName("card-loader")[0].remove(),d.last_subscribers_loaded=t.list.length,d.last_subscribers_offset=e,void 0===t.list||void 0!==t.error||0===t.list.length)return;let s=document.createElement("div");t.list.forEach((e=>{if("price_changed_from_free"===e.subType)return;if("price_changed_not_from_free"===e.subType)return;if("subscribe_was_expired"===e.subType)return;let t;t="returning_subscriber"===e.subType?'<span class="badge bg-warning"><i class="fa-solid fa-rotate-left"></i> <span data-locale-key="returning">'+(0,n.$t)("returning")+"</span></span>":"new_subscriber"===e.subType?'<span class="badge bg-success"><i class="fa-solid fa-plus"></i> <span data-locale-key="new">New</span></span>':'<span class="badge bg-light">'+e.subType+"</span>",s.innerHTML+='<div class="clearfix item p-2">\n                            <div class="float-start me-1"><a href="#" class="open-chat" data-user_id="'+e.replacePairs["{RELATED_USER_ID}"]+'"><i class="fa fa-envelope"></i></a></div>\n                            <div class="float-start"><strong class="text-truncate d-block name2">'+e.replacePairs["{RELATED_USER_NAME}"]+'</strong></div>\n                            <div class="float-start mx-2">'+t+'</div>\n                            <div class="float-end"><small><i class="fa-regular fa-clock"></i> '+(0,n.Kv)(e.createdAt)+"</small></div>\n                        </div>"})),document.getElementById("lastSubscribersList").appendChild(s);document.getElementById("lastSubscribersList").querySelectorAll(".open-chat").forEach((e=>{e.removeEventListener("click",(()=>{})),e.addEventListener("click",(t=>(t.preventDefault(),f(e.dataset.user_id),!1)))})),u.last_subscribers_loading=!1},E=async e=>{let t;if(u.online_fans_loading=!0,0===e?(d.fans_online=[],document.getElementById("onlineFansList").innerHTML='<div class="d-flex justify-content-center card-loader"><div class="spinner-border m-5" role="status"><span class="visually-hidden">Loading...</span></div></div>'):document.getElementById("onlineFansList").innerHTML+='<div class="d-flex justify-content-center card-loader"><div class="spinner-border m-5" role="status"><span class="visually-hidden">Loading...</span></div></div>',t=m.min_total_sum>0?await(0,o.W)("/api2/v2/subscriptions/subscribers?limit=20&offset="+e+"&sort=desc&field=last_activity&type=active&filter[total_spent]="+Number(m.min_total_sum)+"&filter[online]=1","GET",null):await(0,o.W)("/api2/v2/subscriptions/subscribers?limit=20&offset="+e+"&sort=desc&field=last_activity&type=active&filter[online]=1","GET",null),0===e?document.getElementById("onlineFansList").innerHTML="":void 0!==document.getElementById("onlineFansList").getElementsByClassName("card-loader")[0]&&document.getElementById("onlineFansList").getElementsByClassName("card-loader")[0].remove(),d.last_fans_loaded=t.length,d.last_fans_offset=e,void 0===t||void 0!==t.error||0===t.length)return;let s=document.createElement("div");t.forEach((e=>{if(d.fans_online.includes(e.id))return;if(d.fans_online.push(e.id),void 0!==m&&null!==m.hide_creators&&!0===m.hide_creators&&e.isPerformer)return;void 0===e.avatar||null===e.avatar?e.avatar='<div class="rounded-circle bg-info text-center text-uppercase text-muted fs-5" style="width:30px;height:30px;"></div>':e.avatar='<img src="'+e.avatar+'" class="rounded-circle" style="width:30px;height:30px;">';let t=0;void 0!==e.subscribedOnData&&void 0!==e.subscribedOnData.totalSumm&&(t=e.subscribedOnData.totalSumm),s.innerHTML+='<div class="clearfFix item p-1">\n                            <div class="float-start pt-1 item-avatar"><span class="online"> </span>'+e.avatar+'</div>\n                            <div class="float-start mx-2 text-truncate name3">\n                                <a href="https://onlyfans.com/'+e.username+'" class="text-decoration-none">'+e.name.substring(0,20)+"</a><br/>"+x(t)+'\n                            </div>\n                            <div class="float-end p-2"><a href="#" class="open-chat" data-user_id="'+e.id+'"><i class="fa fa-envelope"></i></a></div>\n                        </div>'})),document.getElementById("onlineFansList").appendChild(s);document.getElementById("onlineFansList").querySelectorAll(".open-chat").forEach((e=>{e.removeEventListener("click",(()=>{})),e.addEventListener("click",(t=>(t.preventDefault(),f(e.dataset.user_id),!1)))})),u.online_fans_loading=!1},M=async()=>{if(20===d.last_fans_loaded&&!1===u.online_fans_loading){let e=document.getElementById("onlineFansList");e.offsetHeight+e.scrollTop>=e.scrollHeight-1&&E(d.last_fans_offset+20)}},S=async()=>{if(20===d.last_purchases_loaded&&!1===u.last_purchases_loading){let e=document.getElementById("lastPurchases");e.offsetHeight+e.scrollTop>=e.scrollHeight-1&&g(d.last_purchases_offset+20)}},w=async()=>{if(20===d.last_likes_loaded&&!1===u.last_likes_loading){let e=document.getElementById("lastLikesList");e.offsetHeight+e.scrollTop>=e.scrollHeight-1&&b(d.last_likes_offset+20)}},L=async()=>{if(20===d.last_comments_loaded&&!1===u.last_comments_loading){let e=document.getElementById("lastCommentsList");e.offsetHeight+e.scrollTop>=e.scrollHeight-1&&y(d.last_comments_offset+20)}},k=async()=>{if(20===d.last_subscribers_loaded&&!1===u.last_subscribers_loading){let e=document.getElementById("lastSubscribersList");e.offsetHeight+e.scrollTop>=e.scrollHeight-1&&v(d.last_subscribers_offset+20)}},B=async()=>{(0,n.VP)("onlinefans",{min_total_sum:(0,n.JY)("onlyFansSettings","min_total_sum"),hide_creators:(0,n.JY)("onlyFansSettings","hide_creators","checkbox")}),_(),alert("Saved"),(0,a.Mr)("onlyFansSettings"),E(0)},x=e=>e>0?'<span class="badge bg-success">$'+e+"</span>":'<span class="badge bg-light text-dark">$0</span>';var H=s(268);const T="ch_settings";let I=!0,q={};const O=async()=>{I&&(I=0,(0,a.Nj)(T,"settings.html"),function(){let e=(0,H.U2)("locale")??"en";document.querySelector('#chSettings select[name="ch_settings_ext_position"]').addEventListener("change",(function(){!function(){let e=document.querySelector('#chSettings select[name="ch_settings_ext_position"]').value;(0,a.WY)(e),q.ext_position=e,(0,n.VP)("settings",q)}()})),document.querySelector('#chSettings select[name="ch_settings_site_position"]').addEventListener("change",(function(){!function(){let e=document.querySelector('#chSettings select[name="ch_settings_site_position"]').value;(0,a.Ef)(e),q.site_position=e,(0,n.VP)("settings",q)}()})),document.querySelector('#chSettings select[name="ch_settings_ext_size"]').addEventListener("change",(function(){!function(){let e=document.querySelector('#chSettings select[name="ch_settings_ext_size"]').value;(0,a.Ht)(e),q.ext_size=e,(0,n.VP)("settings",q)}()})),document.querySelector('#chSettings input[name="ch_settings_emojis"]').addEventListener("keyup",(function(){!function(){let e=document.querySelector('#chSettings input[name="ch_settings_emojis"]').value;const t=/[^\u0000-\u007F]+/g,s=e.match(t);q.emojis=s,(0,n.VP)("settings",q)}()})),document.querySelector("#chSettingsReset").addEventListener("click",(function(){confirm("Are you sure?")&&(C(),$(),(0,a.Ht)(q.ext_size),(0,a.WY)(q.ext_position),(0,a.Ef)(q.site_position),(0,n.VP)("settings",q))})),document.querySelector('select[name="locales"]').value=e,document.querySelector('select[name="locales"]').addEventListener("change",(function(e){let t=e.target.value;(0,H.t8)("locale",t),(0,n.UH)()})),(0,n.UH)()}(),function(){let e=(0,n.Gw)();q=e.settings,(void 0===q||void 0===q.emojis)&&C();$()}()),(0,a.Ok)(T)};function $(){(0,n._F)("chSettings","ch_settings_ext_position",q.ext_position,"select"),(0,n._F)("chSettings","ch_settings_site_position",q.site_position,"select"),(0,n._F)("chSettings","ch_settings_ext_size",q.ext_size,"select"),(0,n._F)("chSettings","ch_settings_emojis",q.emojis)}function C(){q={},q.emojis="🥰🍆💦😍❤️🤤🔥😈😘💗🙈🔞😽😹😅😪😭💞🥺🤐🥵😏💕🤝😱😉🤬👅💋😻😼🔥💥✨💫🍑🍒🍌🍓",q.site_position="left",q.ext_position="top_right",q.ext_size="small"}var A=s(329),N=s(360),D=s(76),P=s(783);const F="ch_messages";let j,U=!0,R=0,G={lists:[],media_vault:[],media_selected:[],last_vault_offset:0,list_id:0},z={stop_sending:!1,media_vault_loading:0},W={},V=0,X=[];const Y=async()=>{(0,i.K2)()&&(0,n.C2)()?(U&&(U=0,(0,a.Nj)(F,"messages.html"),document.getElementById("chMessagesNewButton").addEventListener("click",(e=>{(0,c.Sv)("message","message",!1).then((e=>{(0,a.V5)("#chMessagesNew .spinner-border"),document.querySelector('#chMessagesNew select[name="send_to"]').innerHTML="",document.querySelector('#chMessagesNew select[name="excluded_lists[]"]').innerHTML="",document.getElementById("chMessageMedia").innerHTML="",ce(0),(0,n.cC)("chMessagesNewMessage"),document.getElementById("chMessageMediaModal").addEventListener("click",(function(){(0,c.Sv)("message","media",!1).then((e=>{document.querySelector("#chMessageMediaModal .ch-media-vault-container").innerHTML="",document.querySelector("#chMessageMediaModal .ch-media-vault-lists").innerHTML="",G.last_vault_offset=0,G.list_id=0,oe(0),re(0),document.querySelector("#chMessageMediaModal .ch-media-vault-container").addEventListener("scroll",(function(){!function(){if(-1!==G.last_vault_offset&&!1===z.media_vault_loading){let e=document.querySelector("#chMessageMediaModal .ch-media-vault-container");e.offsetHeight+e.scrollTop>=e.scrollHeight-1&&re(G.last_vault_offset+24)}}()})),document.getElementById("chMediaVaultAdd").addEventListener("click",(function(){!function(){let e=document.querySelectorAll("#chMessageMediaModal .ch-media-vault-container input[type='checkbox']:checked"),t="";for(let s=0;s<e.length;s++){let n=Number(e[s].value);if(void 0===G.media_selected[n]&&(G.media_selected[n]=G.media_vault[n]),!document.querySelector("#chMessageMedia .media-item[data-id='"+n+"']")){let e;e="video"===G.media_selected[n].type?'<i class="fa-solid fa-video"></i> '+(0,a.hb)(G.media_selected[n].source.duration):'<i class="fa-solid fa-image"></i>',t+=`\n\t\t\t\t<div class="media-item position-relative d-inline-block m-1 rounded" data-id="${n}">\n\t\t\t\t\t<a class="position-absolute end-0 m-1 badge bg-danger" type="button" onclick="this.parentNode.remove();">\n\t\t\t\t\t\t<i class="fa fa-trash"></i>\n\t\t\t\t\t</a>\n\t\t\t\t\t<span class="position-absolute badge bg-success bg-opacity-75 m-1">${e}</span>\n\t\t\t\t\t<span class="position-absolute bottom-0 m-1 bg-light media-paid">\n\t\t\t\t\t\t<div class="form-check">\n\t\t\t\t\t\t\t<input class="form-check-input" type="checkbox" value="${G.media_selected[n].id}" name="media-paid" id="forPaid${n}">\n\t\t\t\t\t\t\t<label class="form-check-label text-white" for="forPaid${n}">Paid</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t\t<img src="${G.media_selected[n].thumb}" width="100" height="100" class="rounded"/>\n\t\t\t\t</div>\n\t\t\t`}}""!==t&&document.querySelector("#chMessageMedia").insertAdjacentHTML("beforeend",t)}()}))})).catch((e=>{console.error(e)}))})),document.getElementById("chCreateMessageButton").addEventListener("click",(function(){(function(){let e=Q();return 0===e.send_to?((0,P.cB)("Please chose any group from send to list."),!1):e.media_free.length||e.media_paid.length||e.message.trim().length?0===e.price&&e.media_paid.length>0?((0,P.cB)("Error! Paid media can't be added to free message"),!1):e.price>0&&e.price<3?((0,P.cB)("Error! Minimum $3"),!1):e.price>0&&0===e.media_paid.length?((0,P.cB)("Error! No paid media in paid message"),!1):!(0===e.send_to.id||void 0===e.send_to.id||e.send_to.usersCount<1)||((0,P.cB)("Error! List to send is incorrect"),!1):((0,P.cB)("Please fill message field or add media from vault."),!1)})()&&(0,c.Sv)("message","preview",!1).then((e=>{e.querySelector(".excluded-lists").innerHTML="",e.querySelector(".send-to").innerHTML="",e.querySelector(".count-list").innerHTML="0",e.querySelector(".estimated_time").innerHTML="",e.querySelector(".result-success").innerHTML="0",e.querySelector(".result-excluded").innerHTML="0",e.querySelector(".result-failed").innerHTML="0",e.querySelector(".result-unsend").innerHTML="0",e.querySelector(".unsed-count").innerHTML="0",e.querySelector(".unsend-result-block").classList.add("d-none");let t=(0,n.$t)("start"),s=(0,n.$t)("unsend");document.getElementById("chStartMassMessage").innerHTML=`<i class="fa fa-play"></i> <span data-locale-key="start">${t}</span>`,document.getElementById("chUnsendMassMessage").innerHTML=`<i class="fa fa-rotate-left"></i> <span data-locale-key="unsend">${s}</span>`,document.getElementById("chUnsendMassMessage").disabled=!1,document.getElementById("chStartMassMessage").disabled=!1,document.getElementById("chStartMassMessage").classList.remove("d-none"),document.getElementById("chCancelMassMessage").classList.remove("d-none"),document.getElementById("chStopMassMessage").classList.add("d-none"),document.getElementById("chUnsendMassMessage").classList.add("d-none");let i=Q();if(document.querySelector("#chMessagePreviewModal .message-preview").value=i.message,0===i.price?document.querySelector("#chMessagePreviewModal .message-price").innerHTML='<strong class="text-success">FREE</strong>':document.querySelector("#chMessagePreviewModal .message-price").innerHTML="<strong>$"+(0,n.eH)(i.price)+"</strong>",document.querySelector("#chMessagePreviewModal .media-files").innerHTML=i.media_free.length+" free, "+i.media_paid.length+" paid",void 0!==i.send_to.name){document.querySelector("#chMessagePreviewModal .send-to").innerHTML=i.send_to.name+" ("+i.send_to.usersCount+")",document.querySelector("#chMessagePreviewModal .count-list").innerHTML=i.send_to.usersCount;const e=i.delay>0?i.send_to.usersCount*i.delay:i.send_to.usersCount;document.querySelector("#chMessagePreviewModal .estimated_time").innerHTML=(0,a.hb)(e)}if(i.excluded_lists.length>0&&Object.keys(i.excluded_lists).forEach((e=>{void 0!==i.excluded_lists[e].name&&(document.querySelector("#chMessagePreviewModal .excluded-lists").innerHTML+=Number(e)+1+". "+i.excluded_lists[e].name+" ("+i.excluded_lists[e].usersCount+")<br/>")})),i.exclude_spend_less>0){let e=(0,n.$t)("exclude_who_spend_less");document.querySelector("#chMessagePreviewModal .excluded-lists").innerHTML+=`<i class="fa fa-plus"></i> <span data-locale-key="exclude_who_spend_less">${e}</span> <strong>${i.exclude_spend_less}</strong><br/>`}if(i.exclude_spend_more>0){let e=(0,n.$t)("exclude_who_spend_more");document.querySelector("#chMessagePreviewModal .excluded-lists").innerHTML+=`<i class="fa fa-plus"></i> <span data-locale-key="exclude_who_spend_more">${e}</span> <strong>${i.exclude_spend_more}</strong><br/>`}if(i.exclude_creators){let e=(0,n.$t)("exclude_creators");document.querySelector("#chMessagePreviewModal .excluded-lists").innerHTML+=`<i class="fa fa-plus"></i> <span data-locale-key="exclude_creators">${e}</span><br/>`}document.getElementById("chStartMassMessage").addEventListener("click",(function(){!async function(){let e=Q();j={status:0,date_start:Date.now(),count_left:0,success_count:0,failed_count:0,excluded_count:0,messages_ids:[],unsend_success:0,unsend_error:0},z.stop_sending=!1,j.count_left=e.send_to.usersCount;let t=(0,n.$t)("sending");document.getElementById("chStartMassMessage").innerHTML=`<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> <span data-locale-key="sending">${t}</span>...`,document.getElementById("chStartMassMessage").disabled=!0,document.getElementById("chCancelMassMessage").classList.add("d-none"),document.getElementById("chStopMassMessage").classList.remove("d-none"),te(),ne(0,e)}()})),document.getElementById("chStopMassMessage").addEventListener("click",(function(){confirm("Are you sure?")&&(z.stop_sending=!0,document.getElementById("chStartMassMessage").classList.add("d-none"),document.getElementById("chStopMassMessage").classList.add("d-none"),document.getElementById("chCancelMassMessage").classList.remove("d-none"),j.messages_ids.length>0&&document.getElementById("chUnsendMassMessage").classList.remove("d-none"),j.status=2,te(),J())})),document.getElementById("chUnsendMassMessage").addEventListener("click",(function(){!async function(){if(void 0===j.messages_ids||0===j.messages_ids.length)return void(0,P.cB)("Error! Nothing to unsend");if(!confirm("Are you sure?"))return;let e=(0,n.$t)("unsending");document.getElementById("chUnsendMassMessage").innerHTML=`<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> <span data-locale-key="unsending">${e}</span>...`,document.getElementById("chUnsendMassMessage").disabled=!0,document.querySelector("#chMessagePreviewModal .unsend-result-block").classList.remove("d-none");let t=0,s=0;document.querySelector("#chMessagePreviewModal .unsed-count").innerHTML=j.messages_ids.length,j.status=3,te();for(const[e,n]of Object.entries(j.messages_ids)){let e=await(0,o.W)("/api2/v2/messages/"+n,"DELETE",null);void 0!==e.success&&!0===e.success?(j.unsend_success++,t++):(j.unsend_error++,s++),document.querySelector("#chMessagePreviewModal .result-unsend").innerHTML=Number(t)+Number(s)}te(),J();let a=(0,n.$t)("unsend_done");document.getElementById("chUnsendMassMessage").innerHTML=`<i class="fa fa-check"></i> <span data-locale-key="unsend_done">${a}</span>`}()}))})).catch((e=>{console.error(e)}))})),document.getElementById("chMessagesUpdate").addEventListener("click",(function(){J()})),document.querySelector('#chMessagesNew input[name="exclude_spend_less"]').addEventListener("keyup",(function(){K()})),document.querySelector('#chMessagesNew input[name="exclude_spend_more"]').addEventListener("keyup",(function(){K()})),(0,a.WR)("#chMessagesNew")})).catch((e=>{console.error(e)}))})),function(){let e=(0,n.Gw)();W=e.messages,void 0===W||W.min_total_sum}()),R<Date.now()-3e5&&J(),(0,a.Ok)(F)):(0,P.cB)("Error! Need activate")};function K(){let e=document.querySelector('#chMessagesNew input[name="exclude_spend_less"]').value,t=document.querySelector('#chMessagesNew input[name="exclude_spend_more"]').value,s=document.querySelector("#chMessagesNew .filter-calc");0!==e||0!==t?(s.classList.remove("d-none"),e>0&&t>0?s.innerHTML=(0,n.$t)("spent_less_than_zero_and_spend_more_then_zero",{spend_less:e,spend_more:t}):(e>0&&(s.innerHTML=(0,n.$t)("spend_less_than_zero",{spend_less:e})),t>0&&(s.innerHTML=(0,n.$t)("spend_more_than_zero",{spend_more:t})))):s.classList.add("d-none")}async function J(){R=Date.now();let e=document.getElementById("chMessagesTable");e.innerHTML="",document.getElementById("chMessagesUpdate").innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',document.getElementById("chMessagesUpdate").disabled=!0;let t=await(0,D.D)({module:"of_messages",action:"load"},null);if(X=t.profiles,"success"===t.status){let s="";t.data.forEach((e=>{s+=` \n \t\t\t\t<tr>\n \t\t\t\t\t<td>${e.info}</td>\n                \t<td class="text-center" style="width: 100px;">\n                    \t${e.status}\n                    \t<button class="btn btn-light btn-xs mt-1 open-message" type="button" data-id="${e.id}">\n\t\t\t\t\t\t\t<i class="fa fa-eye"></i> <span data-locale-key="open">Open</span>\n\t\t\t\t\t\t</button>\n                \t</td>\n                </tr>`})),""!==s&&e.insertAdjacentHTML("beforeend",s)}let s=document.querySelectorAll("#chMessagesTable .open-message");for(let e=0;e<s.length;e++)s[e].addEventListener("click",(function(e){Z(e)}));(0,a.WR)(),document.getElementById("chMessagesUpdate").innerHTML='<i class="fa-solid fa-sync"></i>',document.getElementById("chMessagesUpdate").disabled=!1,(0,n.UH)()}function Z(e){(0,c.Sv)("message","overview").then((t=>{let s;void 0!==e.target.dataset.id&&(s=e.target.dataset.id),void 0!==e.target.parentNode.dataset.id&&(s=e.target.parentNode.dataset.id),document.getElementById("chMessageUnsent").addEventListener("click",(function(){!async function(){let e=document.getElementById("chMessageUnsent").dataset.id;if(""===e)return;document.getElementById("chMessageUnsent").innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Unsending...',document.getElementById("chMessageUnsent").disabled=!0;let t=await(0,D.D)({module:"of_messages",action:"get_ids"},{message_id:e}),s=0,n=0;if("success"===t.status)for(const[e,a]of Object.entries(t.ids)){let e=await(0,o.W)("/api2/v2/messages/"+a,"DELETE",null);s++,document.getElementById("chMessageUnsent").innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Unsending... '+s+"/"+t.ids.length,void 0!==e.success&&!0===e.success&&n++}await(0,D.D)({module:"of_messages",action:"update_status"},{message_id:e,status:3,message_unsent:n}),J(),document.getElementById("chMessageUnsent").innerHTML='<i class="fa fa-check"></i> Unsend Done'}()})),async function(e){if(void 0===typeof e)return;(0,a.V5)("#chMessageOverview .spinner-border"),document.querySelector("#chMessageOverview .message-initiator").innerHTML="",document.querySelector("#chMessageOverview .message-preview").value="",document.querySelector("#chMessageOverview .message-price").innerHTML="",document.querySelector("#chMessageOverview .media-files").innerHTML="",document.querySelector("#chMessageOverview .send-to").innerHTML="",document.querySelector("#chMessageOverview .excluded-lists").innerHTML="",document.querySelector("#chMessageOverview .message-create").innerHTML="",document.querySelector("#chMessageOverview .message-status").innerHTML="",document.getElementById("chMessageUnsent").dataset.id="",document.getElementById("chMessageUnsent").disabled=!1,document.getElementById("chMessageUnsent").innerHTML='<i class="fa fa-rotate-left"></i> Unsend',document.querySelector("#chMessageOverview .unsent-block").classList.add("d-none");let t=await(0,D.D)({module:"of_messages",action:"load_message"},{message_id:e});"success"===t.status&&(document.querySelector("#chMessageOverview .message-initiator").innerHTML=t.message.initiator,document.querySelector("#chMessageOverview .message-preview").value=t.message.message,document.querySelector("#chMessageOverview .message-price").innerHTML=t.message.price,document.querySelector("#chMessageOverview .media-files").innerHTML=t.message.media,document.querySelector("#chMessageOverview .send-to").innerHTML=t.message.send_to,document.querySelector("#chMessageOverview .excluded-lists").innerHTML=t.message.excluded_lists,document.querySelector("#chMessageOverview .message-create").innerHTML=t.message.date_create,document.querySelector("#chMessageOverview .message-status").innerHTML=t.message.status,t.message.unsent>0&&(document.querySelector("#chMessageOverview .unsent-block").classList.remove("d-none"),document.getElementById("chMessageUnsent").dataset.id=e,document.getElementById("chMessageUnsent").innerHTML='<i class="fa fa-rotate-left"></i> Unsend ('+t.message.unsent+")"));(0,a.BB)("#chMessageOverview .spinner-border"),(0,a.WR)("#chMessageOverview")}(s)})).catch((e=>{console.error(e)}))}function Q(){let e={send_to:0,excluded_lists:[],excluded_lists_ids:[]};e.message=document.querySelector('#chMessagesNew textarea[name="message"]').value,e.delay=document.querySelector('#chMessagesNew input[name="delay"]').value??0,e.exclude_spend_less=document.querySelector('#chMessagesNew input[name="exclude_spend_less"]').value,e.exclude_spend_more=document.querySelector('#chMessagesNew input[name="exclude_spend_more"]').value,e.exclude_creators=document.querySelector('#chMessagesNew input[name="exclude_creators"]').checked,e.price=Number(document.querySelector('#chMessagesNew input[name="message_price"]').value),e.media_paid=[],e.media_free=[];let t=document.querySelectorAll("#chMessageMedia .media-item");for(let s=0;s<t.length;s++){let n={};n.id=G.media_selected[Number(t[s].dataset.id)].id,n.type=G.media_selected[Number(t[s].dataset.id)].type,void 0!==G.media_selected[Number(t[s].dataset.id)].source&&void 0!==G.media_selected[Number(t[s].dataset.id)].source.duration&&(n.duration=G.media_selected[Number(t[s].dataset.id)].source.duration),t[s].querySelector("input[name='media-paid']:checked")?(n.paid=!0,e.media_paid.push(n)):(n.paid=!1,e.media_free.push(n))}let s=document.querySelector('#chMessagesNew select[name="send_to"]').value;1==s?(e.send_to={},e.send_to.id=1,e.send_to.name="Fans Online",e.send_to.usersCount=V):void 0!==G.lists[s]&&void 0!==G.lists[s].id&&(e.send_to={},e.send_to.id=G.lists[s].id,e.send_to.name=G.lists[s].name,e.send_to.usersCount=G.lists[s].usersCount);let n=document.querySelector('#chMessagesNew select[name="excluded_lists[]"]');for(let t=0;t<n.options.length;t++)if(n.options[t].selected&&void 0!==G.lists[Number(n.options[t].value)]&&void 0!==G.lists[Number(n.options[t].value)].id){let s={};s.id=G.lists[Number(n.options[t].value)].id,s.name=G.lists[Number(n.options[t].value)].name,s.usersCount=G.lists[Number(n.options[t].value)].usersCount,e.excluded_lists.push(s),e.excluded_lists_ids.push(Number(n.options[t].value))}return e}function ee(e,t,s){return e.replace(/\{([^|]+)\|([^}]+)\}/g,((e,s,n)=>t.hasOwnProperty(s)?t[s]:n))}async function te(){let e={message:Q(),statuses:j},t=await(0,D.D)({module:"of_messages",action:"update"},e);void 0===j.id&&"undefined"!==t.message_id&&(j.id=Number(t.message_id))}const se=e=>new Promise((t=>setTimeout(t,e)));async function ne(e,t){if(!0===z.stop_sending)return;let s,n={};n.lockedText=!1,n.text=t.message,n.price=t.price,n.isCouplePeopleMedia=!1,n.isForward=!1,n.mediaFiles=[],n.previews=[],t.price>0&&t.media_free.length>0&&Object.keys(t.media_free).forEach((e=>{n.previews.push(t.media_free[e].id)})),t.media_free.length>0&&Object.keys(t.media_free).forEach((e=>{n.mediaFiles.push(t.media_free[e].id)})),t.price>0&&t.media_paid.length>0&&Object.keys(t.media_paid).forEach((e=>{n.mediaFiles.push(t.media_paid[e].id)})),s=1===t.send_to.id?await(0,o.W)("/api2/v2/subscriptions/subscribers?limit=10&offset="+e+"&format=infinite&sort=desc&field=last_activity&type=active&filter[online]=1&more=false","GET",null):await(0,o.W)("/api2/v2/lists/"+t.send_to.id+"/users?offset="+e+"&limit=10&format=infinite","GET",null);for(const[e,a]of Object.entries(s.list)){await se(1e3*t.delay);let e=a.id in X?X[a.id]:{};if(n.text=ee(t.message,e,a.id),!0===z.stop_sending)break;if(t.exclude_spend_less>0&&(void 0===a.subscribedOnData.totalSumm||a.subscribedOnData.totalSumm<t.exclude_spend_less)){console.log("expluded"),j.excluded_count++,ae(t);continue}if(t.exclude_spend_more>0&&void 0!==a.subscribedOnData.totalSumm&&a.subscribedOnData.totalSumm>t.exclude_spend_more){j.excluded_count++,ae(t);continue}if(t.exclude_creators&&void 0!==a.isPerformer&&a.isPerformer){j.excluded_count++,ae(t);continue}if(t.excluded_lists_ids.some((e=>a.listsStates.find((t=>t.id===e&&!0===t.hasUser))))){j.excluded_count++,ae(t);continue}let s=await(0,o.W)("/api2/v2/chats/"+a.id+"/messages","POST",n);void 0!==s.id?(j.success_count++,j.messages_ids.push(s.id)):j.failed_count++,ae(t)}if(s.hasMore)ne(e+10,t);else{document.getElementById("chStartMassMessage").innerHTML='<i class="fa fa-check"></i> <span data-locale-key="done">Done</span>',document.getElementById("chStopMassMessage").classList.add("d-none"),document.getElementById("chCancelMassMessage").classList.remove("d-none");let e=t.send_to.usersCount-(j.success_count+j.excluded_count+j.failed_count);e>0&&(console.log("plus residual messages"),j.failed_count+=e,ae(t)),j.messages_ids.length>0&&document.getElementById("chUnsendMassMessage").classList.remove("d-none"),j.status=1,te(),J()}}async function ae(e){j.count_left=e.send_to.usersCount-j.excluded_count-j.failed_count-j.success_count,j.count_left<0&&(j.count_left=0),document.querySelector("#chMessagePreviewModal .result-success").innerHTML=j.success_count,document.querySelector("#chMessagePreviewModal .result-excluded").innerHTML=j.excluded_count,document.querySelector("#chMessagePreviewModal .result-failed").innerHTML=j.failed_count;const t=e.delay>0?j.count_left*e.delay:j.count_left;document.querySelector("#chMessagePreviewModal .estimated_time").innerHTML=(0,a.hb)(t),Math.floor(5*Math.random())+1===1&&te()}function ie(e){let t=document.querySelectorAll(".ch-media-vault-lists .vault-list");for(let e=0;e<t.length;e++)t[e].classList.remove("active");e.classList.add("active"),G.list_id=e.dataset.id,document.querySelector("#chMessageMediaModal .ch-media-vault-container").innerHTML="",re(0)}async function oe(e){let t="";0===e&&(t+='<button class="btn btn-primary btn-xs vault-list m-1 active" type="button" data-id="0">All</button>');let s=await(0,o.W)("/api2/v2/vault/lists?view=list&offset="+e+"&filled=1&limit=10","GET",null);if(Object.keys(s.list).forEach((e=>{void 0!==s.list[e].id&&(t+='<button class="btn btn-primary btn-xs vault-list m-1" type="button" data-id="'+s.list[e].id+'">'+s.list[e].name+" ("+(s.list[e].photosCount+s.list[e].videosCount)+")</button>")})),document.querySelector("#chMessageMediaModal .ch-media-vault-lists").insertAdjacentHTML("beforeend",t),void 0!==s.hasMore&&!0===s.hasMore)oe(e+10);else{let e=document.querySelectorAll(".ch-media-vault-lists .vault-list");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){ie(e.target)}))}}async function ce(e){if(0===e){G.lists=[];let e=await(0,o.W)("/api2/v2/subscriptions/subscribers/count?type=active&filter[online]=1","GET",null);void 0===e.error&&(V=e.count)}let t=await(0,o.W)("/api2/v2/lists?offset="+e+"&skip_users=all&limit=10&format=infinite","GET",null);Object.keys(t.list).forEach((e=>{void 0===t.list[e].usersCount||t.list[e].usersCount<1||(G.lists[t.list[e].id]=t.list[e])})),void 0!==t.hasMore&&!0===t.hasMore?ce(e+10):function(){(0,a.BB)("#chMessagesNew .spinner-border");let e=document.querySelector('#chMessagesNew select[name="send_to"]'),t=document.querySelector('#chMessagesNew select[name="excluded_lists[]"]'),s=(0,n.$t)("select_list");e.innerHTML='<option value="0" disabled selected>'+s+'..</option><option value="1">Fans Online ('+V+")</option>",t.innerHTML="";let i=[];Object.keys(G.lists).forEach((e=>{i.push({name:G.lists[e].name+" ("+G.lists[e].usersCount+")",value:G.lists[e].id})})),(0,a.f7)(e,i),(0,a.f7)(t,i),void 0!==t.tomselect&&t.tomselect.destroy();new TomSelect("#chExcludedLists",{plugins:["remove_button"]}),new TomSelect("#chSendToLists")}()}async function re(e){let t;(0,a.V5)("#chMessageMediaModal .spinner-border"),z.media_vault_loading=!0,0===e&&(G.media_vault=[]),t=0===G.list_id?await(0,o.W)("/api2/v2/vault/media?limit=24&offset="+e+"&field=recent&sort=desc","GET",null):await(0,o.W)("/api2/v2/vault/media?limit=24&offset="+e+"&field=recent&sort=desc&list="+G.list_id,"GET",null);let s="";Object.keys(t.list).forEach((e=>{if(void 0===t.list[e].id||void 0!==G.media_vault[t.list[e].id])return;let i;G.media_vault[t.list[e].id]=t.list[e],i="video"===t.list[e].type?'<i class="fa-solid fa-video"></i> '+(0,a.hb)(t.list[e].source.duration):'<i class="fa-solid fa-image"></i>',s+=`\n\t\t\t<div class="vault-item position-relative d-inline-block m-1 rounded" data-id="${t.list[e].id}">\n\t\t\t\t<span class="position-absolute end-0 m-2">\n    \t\t\t\t<input \n    \t\t\t\t\tclass="form-check-input checkbox-select" \n    \t\t\t\t\ttype="checkbox"\n    \t\t\t\t\tvalue="${t.list[e].id}" name="vault-selected"\n    \t\t\t\t/>\n\t\t\t\t</span>\n\t\t\t\t<span class="position-absolute badge bg-success bg-opacity-75 m-2">${i}</span>\n\t\t\t\t<span class="position-absolute bottom-0 badge bg-light m-2 text-dark bg-opacity-75">\n\t\t\t\t\t<i class="fa-solid fa-calendar-days"></i> ${(0,n.Ck)(t.list[e].createdAt)}\n\t\t\t\t</span>\n\t\t\t\t<img src="${t.list[e].thumb}" width="135" height="135" class="rounded"/>\n\t\t\t</div>`})),void 0!==t.hasMore&&!0===t.hasMore?G.last_vault_offset=e:G.last_vault_offset=-1,""!==s&&document.querySelector("#chMessageMediaModal .ch-media-vault-container").insertAdjacentHTML("beforeend",s),(0,a.BB)("#chMessageMediaModal .spinner-border"),z.media_vault_loading=!1;const i=document.querySelector(".ch-media-vault-container");!(i.scrollHeight>i.clientHeight)&&t.hasMore&&setTimeout((()=>{re(e+24)}),800)}let le="#tab_home";const de=chrome.runtime.getManifest(),ue=["#tab_settings","#tab_home"],me=async()=>{let e=(0,n.Gw)();const t=document.createElement("div");t.innerHTML=(0,a.AH)("../../assets/html/app/index.html"),document.body.appendChild(t);let s=document.getElementById("chatHelperPanel"),i=document.getElementById("panelSwitchButton").getElementsByClassName("arrow-position")[0];document.getElementById("panelSwitchButton").addEventListener("click",(function(){s.classList instanceof DOMTokenList&&(s.classList.contains("d-none")?pe(s,i):fe(s,i))})),void 0!==e.show_panel&&e.show_panel?pe(s,i):fe(s,i),void 0!==e.settings&&(void 0!==e.settings.ext_position&&(0,a.WY)(e.settings.ext_position),void 0!==e.settings.ext_size&&(0,a.Ht)(e.settings.ext_size)),function(){const e=document.getElementById("chatHelperPanel").querySelectorAll(".panel-tab-link");e.forEach((t=>{t.addEventListener("click",(s=>{if(void 0!==t.dataset.bsTarget&&le!==t.dataset.bsTarget){switch(e.forEach((e=>{e.classList.remove("active")})),t.classList.add("active"),t.dataset.bsTarget){case"#tab_home":(0,N.h)();break;case"#tab_fans":p();break;case"#tab_fan":(0,A.yk)();break;case"#tab_settings":O();break;case"#tab_messages":Y()}le=t.dataset.bsTarget,(0,n.UH)()}}))}))}(),(0,N.h)(),he(),(0,n.UH)()};function pe(e,t){(0,n.VP)("show_panel",!0),e.classList.remove("d-none"),t.classList.add("fa-eye"),t.classList.remove("fa-eye-slash")}const he=()=>{let e=(0,n.iE)();const t=document.getElementById("chatHelperPanel").querySelectorAll(".panel-tab-link");(0,i.K2)()&&(0,n.C2)()?t.forEach((e=>e.removeAttribute("disabled"))):t.forEach((e=>{ue.includes(e.getAttribute("data-bs-target"))||e.setAttribute("disabled",!0)})),(0,i.K2)()?((0,a.yG)("chCfActivateStatus",'<span class="badge bg-success"><i class="fa fa-check"></i> <span data-locale-key="active">active</span></span>',!1),void 0!==e.auth&&void 0!==e.auth.license_name&&(0,a.yG)("chCfAccountName",'<span class="badge bg-light text-dark"><i class="fa fa-user"></i> '+e.auth.license_name+"</span>",!1)):((0,a.yG)("chCfActivateStatus",'<span class="badge bg-danger"><i class="fa fa-times"></i> <span data-locale-key="disabled">disabled</span></span>',!1),(0,a.yG)("chCfAccountName","",!1)),(0,a.yG)("chCfPanelVersion",'<span class="badge bg-dark"><i class="fa-solid fa-code-branch"></i> '+de.version+"</span>",!1),(0,n.UH)()};function fe(e,t){(0,n.VP)("show_panel",!1),e.classList.add("d-none"),t.classList.remove("fa-eye"),t.classList.add("fa-eye-slash")}},268:(e,t,s)=>{s.d(t,{Od:()=>a,U2:()=>n,t8:()=>i});const n=e=>localStorage.getItem(e),a=e=>localStorage.removeItem(e),i=(e,t)=>localStorage.setItem(e,t)},60:(e,t,s)=>{s.d(t,{GA:()=>u,Sv:()=>o,jB:()=>c});var n=s(878),a=s(808);function i(){document.querySelectorAll(".modal").forEach((e=>e.remove())),document.querySelectorAll(".modal-backdrop").forEach((e=>e.remove()))}const o=async(e,t,s=!0)=>(s&&i(),new Promise(((s,a)=>{const i=`../../assets/html/app/modules/${e}/modals/${t}`,o=r((0,n.JI)(i));o?(l(o),d(o),s(o)):a("No modal element found in the fetched content")}))),c=async(e,t=!0)=>(t&&i(),new Promise(((t,s)=>{const n=r(e);n?(l(n),d(n),t(n)):s("No modal element found in the fetched content")})));function r(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelector(".modal")}function l(e){const t=new bootstrap.Modal(e);document.getElementById("bs-5").appendChild(e),t.show(),(0,a.UH)()}function d(e){e.addEventListener("hidden.bs.modal",(()=>{bootstrap.Modal.getInstance(e).dispose(),e.remove()}))}const u=e=>{const t=document.getElementById(e);if(t){const s=bootstrap.Modal.getInstance(t);s?s.hide():console.error("No Bootstrap modal instance found for the element with ID:",e)}else console.error("No element found with ID:",e)}},76:(e,t,s)=>{s.d(t,{D:()=>o});var n=s(808),a=s(268);const i=chrome.runtime.getManifest(),o=async(e,t=null)=>{const s=(0,n.iE)(),o=(0,n.Gw)();let c={};c.version=i.version,void 0!==s.auth&&void 0!==s.auth.id&&(c.id=s.auth.id,c.key=s.auth.key),void 0!==s.account&&void 0!==s.account.id&&(c.of_account_id=s.account.id),void 0!==s.auth&&void 0!==s.auth.activation_key&&(c.activation_key=s.auth.activation_key),void 0!==o&&void 0!==o.operator_name&&""!==o.operator_name&&(c.operator_name=o.operator_name);let r=(0,a.U2)("locale")??"en";const l=await fetch(`https://chathelper.ai/api/ext?lang=${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:c,action:e,data:t})});if(-1===l.headers.get("content-type").indexOf("application/json"))throw new Error("Server error, please try later.");const d=await l.json();if("unauthorized"===d.status&&(0,n.w7)(),"error"===d.status)throw new Error(d.message);return d}},776:(e,t,s)=>{s.d(t,{$N:()=>p,K2:()=>h,NG:()=>m});var n=s(808),a=s(76),i=s(199),o=s(686),c=s(360),r=s(56),l=s(783);const d=chrome.runtime.getManifest();let u=!1;const m=async()=>{document.getElementById("activeChAccountButton").innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Verifying..',document.getElementById("activeChAccountButton").disabled=!0;try{let e=document.getElementById("chActivateKey").value,t=await(0,a.D)({module:"auth",action:"process_activate"},{key:e,of_account_id:(0,i.z)(),version:d.version});if("error"===t.status)throw new Error(t.message);if("verify"===t.status){let s=t.verify_key;(0,n.rF)({account:{id:(0,i.z)()},rules:t.rules}),t.isSpecificOperator&&(0,n.rF)({isSpecificOperator:!0});let c=await(0,o.W)("/api2/v2/users/me","GET",null);if(c.id!==Number((0,i.z)()))throw new Error("Account Error, please refresh page");let r=c.about,l=r.slice(0,900)+" "+s;if(!0!==(await(0,o.W)("/api2/v2/users/me","PATCH",{about:l})).success)throw new Error("Error Account Verify (update about), try later");let u=await(0,a.D)({module:"auth",action:"process_verify"},{key:e,of_account_id:(0,i.z)(),version:d.version});if(await(0,o.W)("/api2/v2/users/me","PATCH",{about:r}),"error"===u.status)throw new Error(check_verify.message);t=u}if("subscribe_end"===t.status){return document.querySelector("#chSubscribeEndModal .modal-body").innerHTML=t.body,new bootstrap.Modal(document.getElementById("chSubscribeEndModal"),{}).show(),document.getElementById("activeChAccountButton").innerHTML="Activate",void(document.getElementById("activeChAccountButton").disabled=!1)}return"success"===t.status&&(0,n.rF)({account:t.account,auth:t.auth,subscribe:t.subscribe,rules:t.rules}),t.isSpecificOperator&&((0,n.rF)({isSpecificOperator:!0}),(0,n.VP)("operator_id",t.auth.operators[0].id),document.getElementById("addOperatorName").classList.add("d-none"),document.getElementById("chOperatorname").disabled=!0),(0,n.Hf)("auth.activation_key",e),document.getElementById("activeChAccountButton").innerHTML="Activate",document.getElementById("activeChAccountButton").disabled=!1,await p(),(0,c.D)(),(0,r.S)(),!0}catch(e){(0,l.cB)(e.message),document.getElementById("activeChAccountButton").innerHTML="Activate",document.getElementById("activeChAccountButton").disabled=!1}},p=async()=>{let e=(0,n.iE)();if(0===(0,i.z)())return u=!1,!1;if(void 0===e.account||void 0===e.account.id||void 0===e.auth||void 0===e.auth.id||void 0===e.auth.key||void 0===e.rules||void 0===e.rules.static_param)return u=!1,!1;let t=await(0,a.D)({module:"auth",action:"check"},{isSpecificOperator:e.isSpecificOperator??null,operator:e.auth.operators[0]});if(e.isSpecificOperator&&(document.getElementById("addOperatorName").classList.add("d-none"),document.getElementById("chOperatorname").disabled=!0,setTimeout((()=>{document.querySelector("#chOperatorname-ts-control").style.opacity=1}),500)),void 0!==t.status&&"success"===t.status&&t.account.id===(0,i.z)()){u=!0,(0,n.rF)({account:t.account,subscribe:t.subscribe});let e=new CustomEvent("updateOperators",{cancelable:!0,detail:t.operators});return t.isSpecificOperator&&((0,n.rF)({isSpecificOperator:!0}),document.getElementById("addOperatorName").classList.add("d-none")),document.dispatchEvent(e),!0}return u=!1,(0,n.w7)(),!1},h=()=>u},329:(e,t,s)=>{s.d(t,{BD:()=>P,Jg:()=>k,Xn:()=>L,Xz:()=>F,ot:()=>w,t0:()=>x,yk:()=>E});var n=s(686),a=s(878),i=s(60),o=s(808),c=s(776),r=s(76);const l="ch_fan",d={small:67,medium:170,large:370};let u=!1,m={},p=0,h={},f={},_={},g=(0,o.iE)(),b={},y={},v={filter:0,unpurchased:!1,multiple:!1,max_points:10};!function(){let e=(0,o.Gw)();_=e.fan,void 0!==e.fan_prices&&void 0!==e.fan_prices.filter&&(v=e.fan_prices)}();const E=async()=>{(0,c.K2)()&&(0,o.C2)()?(u||(u=!0,(0,a.Nj)(l,"fan.html"),function(){const e=document.getElementById("chModalFanPurchasesMediaButton"),t=document.getElementById("chModalFanPurchasesPricesButton"),s=document.getElementById("chModalFanProfileButton");e.addEventListener("click",(e=>{(0,i.Sv)("fan","purchases_media").then((e=>{y.modal_media=!0,async function(e){if(!B())return;let t=e.id;C=[],(0,a.V5)(`#${t} .spinner-border`),$(p,0),A()}(e),e.addEventListener("hide.bs.modal",(e=>{y.modal_media=!1}))})).catch((e=>{console.error(e)}))})),t.addEventListener("click",(e=>{y.modal_prices=!0,(0,i.Sv)("fan","purchases_prices").then((e=>{!async function(e){if(!B())return;let t=e.id;(0,a.V5)(`#${t} .spinner-border`),e.querySelector(`input[name=ch-fan-prices-filter][value="${v.filter}"]`).checked=!0,e.querySelector("input[name=ch-fan-prices-multiple]").checked=v.multiple,e.querySelector("input[name=ch-fan-prices-unpurchased]").checked=v.unpurchased,e.querySelector("input[name=ch-fan-prices-max-points]").value=v.max_points,e.querySelectorAll("input[name=ch-fan-prices-filter]").forEach((e=>{e.addEventListener("change",(e=>{v.filter=e.target.value,D(!0)}))})),e.querySelector("input[name=ch-fan-prices-unpurchased]").addEventListener("change",(e=>{v.unpurchased=e.target.checked,D(!0)})),e.querySelector("input[name=ch-fan-prices-multiple]").addEventListener("change",(e=>{v.multiple=e.target.checked,D(!0)})),e.querySelector("input[name=ch-fan-prices-max-points]").addEventListener("keyup",(e=>{v.max_points=e.target.value,D(!0)})),N={},y.purchases_graph_loaded=!1,await $(p,0),D()}(e),e.addEventListener("hide.bs.modal",(e=>{y.modal_prices=!1}))})).catch((e=>{console.error(e)}))})),s.addEventListener("click",(e=>{(0,i.Sv)("fan","profile").then((e=>{!function(e){if(q()){const t=b.info;e.querySelector('#chModalFanProfileModal input[name="real_name"]').value=(0,a.lr)(t.real_name),(0,a.xb)(t.where_from)||(e.querySelector('#chModalFanProfileModal input[name="where_from"]').value=(0,a.lr)(t.where_from)),(0,a.xb)(t.age_occupation)||(e.querySelector('#chModalFanProfileModal textarea[name="age_occupation"]').value=(0,a.lr)(t.age_occupation)),(0,a.xb)(t.hobbies)||(e.querySelector('#chModalFanProfileModal textarea[name="hobbies"]').value=(0,a.lr)(t.hobbies)),(0,a.xb)(t.important_info)||(e.querySelector('#chModalFanProfileModal textarea[name="important_info"]').value=(0,a.lr)(t.important_info))}}(e),document.getElementById("chModalSaveProfile").addEventListener("click",(e=>{!async function(){(0,a.Xh)("chModalSaveProfile",1);let e={real_name:document.querySelector('#chModalFanProfileModal input[name="real_name"]').value,where_from:document.querySelector('#chModalFanProfileModal input[name="where_from"]').value,age_occupation:document.querySelector('#chModalFanProfileModal textarea[name="age_occupation"]').value,hobbies:document.querySelector('#chModalFanProfileModal textarea[name="hobbies"]').value,important_info:document.querySelector('#chModalFanProfileModal textarea[name="important_info"]').value};await(0,r.D)({module:"profile",action:"update"},{fan_id:p,profile:e}),(0,a.Xh)("chModalSaveProfile",0),alert("Saved"),(0,a.Mr)("chModalFanProfileModal"),I(!0)}()}))})).catch((e=>{console.error(e)}))}));const n=document.getElementById("chFanDataNote");!function(e,t,s){let n;e.addEventListener("input",(function(){clearTimeout(n),n=setTimeout((function(){s(e.value)}),t)}))}(n,1e3,O)}()),S(),(0,a.Ok)(l),x()):alert("Error! Need activate")};let M=[];const S=()=>{const e=(0,o.Gw)().settings;let t=e?.ext_size?d[e.ext_size]:67;document.getElementById("chFanDataNote").style.height=t+"px"},w=async e=>{for(const t of e.list)M[t.id]=t.thumb},L=async()=>{B()&&$(p,0)},k=async()=>{document.querySelectorAll(".l-main-content .b-photos__item").forEach((e=>{if(e.classList.contains("ch-item-marked"))return;let t=e.querySelector("img");if(null!==t){if(!("id"in e.dataset))for(const s in M)if(M[s]===t.src){e.dataset.id=Number(s);break}if("id"in e.dataset){if(-1!==f[p].media.free_ids.indexOf(Number(e.dataset.id)))e.insertAdjacentHTML("beforeend",'<div style="position: absolute;bottom: 0;margin: 10px;background-color: rgb(232 232 232 / 75%);padding: 5px 15px;border-radius: 20px;font-size: 30px;z-index: 10;border: 4px solid #000;"><i class="fa-solid fa-paper-plane"></i></div>');else if(-1!==f[p].media.not_purchases_ids.indexOf(Number(e.dataset.id)))e.insertAdjacentHTML("beforeend",'<div style="position: absolute;bottom: 0;margin: 10px;background-color: rgb(214 0 0 / 75%);padding: 5px 15px;border-radius: 20px;font-size: 30px;z-index: 10;border: 4px solid #000;"><i class="fa-solid fa-xmark"></i></div>');else{if(-1===f[p].media.purchases_ids.indexOf(Number(e.dataset.id)))return;e.insertAdjacentHTML("beforeend",'<div style="position: absolute;bottom: 0;margin: 10px;background-color: rgb(3 214 0 / 75%);padding: 5px 15px;border-radius: 20px;font-size: 30px;z-index: 10;border: 4px solid #000;"><i class="fa fa-check"></i></div>')}e.classList.add("ch-item-marked")}}}))};function B(){return 0!==p&&void 0!==m[p]&&void 0!==m[p].name}const x=async()=>{if(u){if(!B()){if(0!==p){P(await H(p,"u"+p))}if(!B())return void(0,a.hp)("chFanBlock","chFanNoIssetError",!1)}(0,a.hp)("chFanNoIssetError","chFanBlock",!1),T()}};async function H(e,t){return void 0!==h[e]&&void 0!==h[e].id||(h[e]=await(0,n.W)("/api2/v2/users/"+t,"GET",null)),h[e]}const T=async()=>{if((0,a.Yq)(),(0,a.Yh)("chFanName","",!1),(0,a.Yh)("chFanSubscribed","",!1),(0,a.Yh)("chFanSpent","",!1),(0,a.Yh)("chFanDuration","",!1),document.getElementById("chFanDataNote").value="",(0,a.yG)("chFanName",m[p].name+' <small><a href="https://onlyfans.com/'+m[p].username+'" target="_blank" rel="nofollow">@'+m[p].username+"</a></small>",!1),m[p].subscribedOn?(0,a.Yh)("chFanSubscribed",`${(0,o.$t)("yes")} (${m[p].subscribedOnDuration})`,!1):(0,a.Yh)("chFanSubscribed",`${(0,o.$t)("no")}`,!1),await H(p,m[p].username),void 0===h[p].subscribedOnData)return;let e=`\n\t\t<strong id="chFanSpent">\n\t\t\t$${h[p].subscribedOnData?.totalSumm?.toLocaleString("us")||0}\n\t\t</strong>`,t=`\n\t\t<strong>\n\t\t\t${h[p].subscribedOnDuration||""}\n\t\t</strong>`;if(h[p].subscribedOnData?.totalSumm>0){e+=`<button \n\t\t\ttype="button" \n\t\t\tclass="btn btn-secondary btn-xs" \n\t\t\tdata-bs-toggle="popover" \n\t\t\tdata-bs-content="\n\t\t\t\t<table class='table table-sm'>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>${(0,o.$t)("message")}</th>\n\t\t\t\t\t\t\t<th>${(0,o.$t)("posts")}</th>\n\t\t\t\t\t\t\t<th>${(0,o.$t)("tips")}</th>\n\t\t\t\t\t\t\t<th>${(0,o.$t)("subs")}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t$${(0,o.eH)(h[p].subscribedOnData.messagesSumm)}\n\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t${(0,o.eH)(100/h[p].subscribedOnData.totalSumm*h[p].subscribedOnData.messagesSumm)}%\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t$${(0,o.eH)(h[p].subscribedOnData.postsSumm)}\n\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t${(0,o.eH)(100/h[p].subscribedOnData.totalSumm*h[p].subscribedOnData.postsSumm)}%\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t$${(0,o.eH)(h[p].subscribedOnData.tipsSumm)}\n\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t${(0,o.eH)(100/h[p].subscribedOnData.totalSumm*h[p].subscribedOnData.tipsSumm)}%\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t$${(0,o.eH)(h[p].subscribedOnData.subscribesSumm)}\n\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t${(0,o.eH)(100/h[p].subscribedOnData.totalSumm*h[p].subscribedOnData.subscribesSumm)}%\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>">\n\t\t\t\t<i class="fa fa-eye"></i>\n\t\t\t</button>`}(0,a.yG)("chFanSpent",e,!1),(0,a.yG)("chFanDuration",t,!1);let s="";h[p].listsStates.forEach((e=>{"custom"===e.type&&(s+='<span class="badge bg-success">'+e.name+"</span> ")})),(0,a.yG)("chFanCustomLists",s,!1),await I(),(0,a.Yq)()};async function I(e=!1){let t=await(0,r.D)({module:"profile",action:"get"},{fan_id:p});if(b=t,"success"===t.status){if(void 0===t.note)return;document.getElementById("chFanDataNote").value=t.note}!function(e){let t="";if(document.getElementById("chFanProfileView").innerHTML="",q()){const s=b.info;t="<div class='popover1'>",t+=`<i class='fa fa-user'></i> ${(0,a.$_)(s.real_name)} <hr class='m-1'/>`,(0,a.xb)(s.where_from)||(t+=`<i class='fa fa-globe'></i> ${(0,a.$_)(s.where_from)} <hr class='m-1'/>`),(0,a.xb)(s.age_occupation)||(t+=`<i class='fa-solid fa-user-doctor'></i> ${(0,a.$_)(s.age_occupation)} <hr class='m-1'/>`),(0,a.xb)(s.hobbies)||(t+=`<i class='fa-solid fa-soccer-ball'></i> ${(0,a.$_)(s.hobbies)} <hr class='m-1'/>`),(0,a.xb)(s.important_info)||(t+=`<i class='fa-solid fa-warning'></i> ${(0,a.$_)(s.important_info)} </div>`),e&&(0,a.Yq)(),document.getElementById("chFanProfileView").innerHTML=`<button\n\t\t\t\ttype="button"\n\t\t\t\tdata-bs-placement="left"\n\t\t\t\tclass="btn btn-secondary btn-xs"\n\t\t\t\tdata-bs-toggle="popover"\n\t\t\t\tdata-bs-content="${t}"\n\t\t\t>\n\t\t\t\t<i class="fa fa-eye"></i>\n\t\t\t</button>`,e&&(0,a.Yq)()}}(e)}function q(){return Object.keys(b).length&&"success"===b.status&&void 0!==b.info.real_name}async function O(e){B()&&(""!==e||confirm("Do you want to delete everything from fan note?"))&&await(0,r.D)({module:"profile",action:"update_note"},{fan_id:p,note:e})}async function $(e,t){let s="",i=0;s=0===t?await(0,n.W)("/api2/v2/chats/"+e+"/media/?limit=20&skip_users=all","GET",null):await(0,n.W)("/api2/v2/chats/"+e+"/media/?last_id="+t+"&limit=20&skip_users=all","GET",null),Object.keys(s.list).forEach((t=>{-1===f[e].media.all_ids.indexOf(s.list[t].id)?(!0===s.list[t].isFree?s.list[t].media.forEach((t=>{f[e].media.free_ids.push(Number(t.id))})):!1===s.list[t].isOpened?s.list[t].media.forEach((t=>{f[e].media.not_purchases_ids.push(Number(t.id))})):s.list[t].media.forEach((t=>{f[e].media.purchases_ids.push(Number(t.id))})),f[e].media.all_ids.push(s.list[t].id),f[e].media.purchases_items.push(s.list[t]),void 0!==s.list[t].media[0].id&&void 0!==s.list[t].fromUser.id&&Number(s.list[t].fromUser.id)===Number(g.account.id)&&!0!==s.list[t].isFree&&!1!==s.list[t].isOpened&&(i++,"video"===s.list[t].media[0].type?f[e].media.counts.video++:f[e].media.counts.photo++)):s.hasMore=!1})),y.modal_prices&&i>0&&D(),y.modal_media&&i>0&&A(),void 0!==s.hasMore&&!0===s.hasMore?$(e,s.nextLastId):function(){y.modal_media&&(0,a.BB)("#chModalFanPurchasesMediaModal .spinner-border");y.modal_prices&&(0,a.BB)("#chModalFanPurchasesPricesModal .spinner-border");(0,a.BB)("#ModalMediaVault___BV_modal_header_ .spinner")}()}let C=[];function A(){let e="",t=f[p].media.purchases_items;t.length&&console.log("Purchases items are empty!"),t.forEach((t=>{if(-1!==C.indexOf(t.id))return;let s,n;if(C.push(t.id),s="video"===t.media[0].type?'<i class="fa-solid fa-video"></i>':'<i class="fa-solid fa-image"></i>',!1===t.isOpened)return;let i=f[p].media.counts;(0,a.Yh)("#chModalFanPurchasesMediaModal .ch-all-count",i.video+i.photo),(0,a.Yh)("#chModalFanPurchasesMediaModal .ch-photo-count",i.photo),(0,a.Yh)("#chModalFanPurchasesMediaModal .ch-video-count",i.video),n=""!==t.text?`\n\t\t\t\t<span \n\t\t\t\t\tclass="position-absolute bottom-0 end-0 badge bg-light m-2 text-dark bg-opacity-75" \n\t\t\t\t\tdata-bs-toggle="tooltip" \n\t\t\t\t\ttitle="${t.text}">\n\t\t\t\t\t<i class="fa-solid fa-message"></i>\n\t\t\t\t</span>`:"",e+=`\n\t\t\t<div class="media-item position-relative d-inline-block m-1 rounded">\n\t\t\t\t<span class="position-absolute badge bg-success bg-opacity-75 m-2">${s} $${(0,o.eH)(t.price)}</span>\n\t\t\t\t<a \n\t\t\t\t\thref="https://onlyfans.com/my/chats/chat/${p}?firstId=${t.id}" \n\t\t\t\t\ttarget="_blank" \n\t\t\t\t\tclass="position-absolute bottom-0 badge bg-light m-2 text-dark bg-opacity-75"\n\t\t\t\t>\n\t\t\t\t\t<i class="fa-solid fa-calendar-days"></i> ${(0,o.Ck)(t.createdAt)}\n\t\t\t\t</a>\n\t\t\t\t${n}\n\t\t\t\t<img src="${t.media[0].thumb}" width="145" height="145" class="rounded"/>\n\t\t\t</div>`})),""!==e&&(document.querySelector("#chModalFanPurchasesMediaModal .modal-body").innerHTML+=e,(0,a.WR)("#chModalFanPurchasesMediaModal .modal-body"))}let N={};function D(e=!1){(0,o.VP)("fan_prices",v);let t=[],s=0,n=0,i=0,c=0;if(!e&&y.purchases_graph_loaded)return;let r=f[p].media.purchases_items;if(!r.length)return void console.log("Purchases items array is empty");if(r.forEach((e=>{let a=new Date(e.createdAt).toLocaleString("en",{month:"2-digit",day:"2-digit"});if(!v.unpurchased&&!1===e.isOpened)return;if(n>=v.max_points)return void(y.purchases_graph_loaded=!0);let o="video"===e.media[0].type?"Video":"Photo";1===Number(v.filter)&&"Photo"!==o||2===Number(v.filter)&&"Video"!==o||(v.multiple||s!==a)&&(s=a,!1===e.isOpened&&(o+=" (Unpurchased)"),t.push({x:a,y:Number(e.price),title:o,message:e.text,isOpened:e.isOpened}),i<e.price&&(i=e.price),c+=e.price,n++)})),(0,o.t)(N,t))return;N=t,(0,a.C2)("chFanPricesChart",t);let l=c&&n?c/n:0;(0,a.Yh)("#chModalFanPurchasesPricesModal .ch-max-price","$"+(0,o.eH)(i)),(0,a.Yh)("#chModalFanPurchasesPricesModal .ch-avg-price","$"+(0,o.eH)(l))}function P(e){if((0,c.K2)()&&(0,o.C2)()){if(void 0!==e.id){let t=e;(e={})[t.id]=t}if(void 0!==Object.keys(e)[0]&&void 0!==e[Object.keys(e)[0]].id){let t=e[Object.keys(e)[0]].id;m[t]=e[t],void 0===f[t]&&(f[t]={media:{}},f[t].media.counts={photo:0,video:0},f[t].media.purchases_items=[],f[t].media.all_ids=[],f[t].media.purchases_ids=[],f[t].media.not_purchases_ids=[],f[t].media.free_ids=[])}}}function F(e){(0,c.K2)()&&(0,o.C2)()&&(p=e)}},360:(e,t,s)=>{s.d(t,{D:()=>h,h:()=>p});var n=s(808),a=s(878),i=s(783),o=s(60),c=s(776),r=s(56),l=(s(199),s(76));const d="ch_home";let u=null,m=!0;const p=async()=>{m&&(m=0,(0,a.Nj)(d,"home.html"),document.getElementById("activeChAccountButton").addEventListener("click",(e=>{(0,c.NG)()})),document.querySelector("#addOperatorName").addEventListener("click",(function(){!async function(){try{await(0,o.Sv)("home","operator");const e=document.querySelector(".operator-name-form");document.querySelector("#operator-name-save").addEventListener("click",(async function(t){if(t.preventDefault(),t.stopPropagation(),!e.checkValidity())return void(0,i.cB)("Please fill all inputs");(0,o.GA)("operatorNameModal");let s={name:e.querySelector("#name").value,color:e.querySelector("#color").value};try{let e=await(0,l.D)({module:"operator",action:"store"},s);(0,n.Hf)("auth.operators",e.data.operator),u.addOption(e.data.operator),u.setValue(e.data.operator.id),(0,i.t5)()}catch(e){(0,i.cB)(e.message)}e.classList.add("was-validated")}),!1)}catch(e){(0,i.cB)(e.message)}}()})),document.querySelector("#chOperatorname").addEventListener("change",(function(e){!function(e){(0,n.VP)("operator_id",e.target.value)}(e)})),document.getElementById("disconnectChAccountButton").addEventListener("click",(async e=>{confirm("Are you sure to sign out?")&&((0,n.rF)({},!0),(0,n.VP)("operator_id",0),await(0,c.$N)(),h(),(0,r.S)())}))),(0,a.Ok)(d)};function h(){let e=document.getElementById("mainWaiting"),t=document.getElementById("chAccountActivate"),s=document.getElementById("chAccountInfo");s&&(s.classList.add("d-none"),e.classList.add("d-none"),t.classList.add("d-none"),(0,c.K2)()&&(s.classList.remove("d-none"),function(){let e,t=(0,n.iE)();(0,n.Gw)();document.getElementById("chLicenseName").innerText=t.auth.license_name;let s="";switch(t.subscribe.type){case"trial":e='<span class="badge bg-warning"><i class="fa-solid fa-hourglass me-1"></i> Trial</span>',s=(0,n.iO)(new Date(1e3*t.subscribe.expire));break;case"free":e='<span class="badge bg-success"><i class="fa-solid fa-check me-1"></i> FREE</span>';break;case"paid":e='<span class="badge bg-success"><i class="fa-solid fa-check me-1"></i> Paid</span>',s=(0,n.iO)(new Date(1e3*t.subscribe.expire))}if(document.getElementById("chAccountSubscribeType").innerHTML=e,""!==s){let e=`<br/><a href="https://chathelper.ai/onlyfans/accounts" target="_blank" class="btn btn-success btn-xs mt-2"><i class="fa-regular fa-thumbs-up"></i> <span data-locale-key="prolong_subscribe">${(0,n.$t)("prolong_subscribe")}</span></a>`;document.getElementById("chAccountSubscribeEnd").innerHTML=s+e}}()),(0,n.C2)()&&!(0,c.K2)()&&t.classList.remove("d-none"),(0,n.C2)()||(0,c.K2)()||e.classList.remove("d-none"),(0,r.S)())}document.addEventListener("updateOperators",(function(e){let t=(0,n.Gw)();var s,a;(u||function(e,t){if(u)return;u=new TomSelect(`#${e}`,{maxItems:1,valueField:"id",controlInput:null,labelField:"name",closeAfterSelect:!0,hideSelected:!0,hidePlaceholder:!1,options:t,placeholder:(0,n.$t)("select_user"),render:{item:function(e,t){return`<div>\n\t\t\t\t\t<span\n                        class="ch-dialog-row-color ${0===e.id?" d-none":""}"\n                        style="background-color:${e.color};position:relative;top:3px"\n                    ></span>\n                    <span class="name" data-locale-key="${0===e.id?"select_user":e.name}">${e.name}</span>\n                </div>`},option:function(e,t){return`<div class="${0===e.id?"d-none":""} ">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass="ch-dialog-row-color"\n\t\t\t\t\t\tstyle="background-color:${e.color};position:relative;top:3px"\n\t\t\t\t\t></span>\n\t\t\t\t\t<span class="label">${e.name}</span>\n\t\t\t\t</div>`}},create:!1})}("chOperatorname",e.detail),u.clear(),u.clearOptions(),u.addOption({id:0,name:(0,n.$t)("select_user")}),u.addOption(e.detail),(0,n.Hf)("auth.operators",e.detail,!0),t.operator_id&&0!==Number(t.operator_id)||(s=e.detail,a=t.operator_id,s.findIndex((e=>e.id===Number(a)))>0))?u.setValue(t.operator_id):u.setValue(0)}))},686:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>apiFetch});var _helpers_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(808),_local_storage_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(268),_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(76),_toast_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(783),sha1$1={exports:{}};(function(module){(function(){var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=commonjsGlobal);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&module.exports,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(t){return new Sha1(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var s=OUTPUT_TYPES[t];e[s]=createOutputMethod(s)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var s,n,a=0,i=e.length||0,o=this.blocks;a<i;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),t)for(n=this.start;a<i&&n<64;++a)o[n>>2]|=e[a]<<SHIFT[3&n++];else for(n=this.start;a<i&&n<64;++a)(s=e.charCodeAt(a))<128?o[n>>2]|=s<<SHIFT[3&n++]:s<2048?(o[n>>2]|=(192|s>>6)<<SHIFT[3&n++],o[n>>2]|=(128|63&s)<<SHIFT[3&n++]):s<55296||s>=57344?(o[n>>2]|=(224|s>>12)<<SHIFT[3&n++],o[n>>2]|=(128|s>>6&63)<<SHIFT[3&n++],o[n>>2]|=(128|63&s)<<SHIFT[3&n++]):(s=65536+((1023&s)<<10|1023&e.charCodeAt(++a)),o[n>>2]|=(240|s>>18)<<SHIFT[3&n++],o[n>>2]|=(128|s>>12&63)<<SHIFT[3&n++],o[n>>2]|=(128|s>>6&63)<<SHIFT[3&n++],o[n>>2]|=(128|63&s)<<SHIFT[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=o[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,s=this.h0,n=this.h1,a=this.h2,i=this.h3,o=this.h4,c=this.blocks;for(e=16;e<80;++e)t=c[e-3]^c[e-8]^c[e-14]^c[e-16],c[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)s=(t=(n=(t=(a=(t=(i=(t=(o=(t=s<<5|s>>>27)+(n&a|~n&i)+o+1518500249+c[e]<<0)<<5|o>>>27)+(s&(n=n<<30|n>>>2)|~s&a)+i+1518500249+c[e+1]<<0)<<5|i>>>27)+(o&(s=s<<30|s>>>2)|~o&n)+a+1518500249+c[e+2]<<0)<<5|a>>>27)+(i&(o=o<<30|o>>>2)|~i&s)+n+1518500249+c[e+3]<<0)<<5|n>>>27)+(a&(i=i<<30|i>>>2)|~a&o)+s+1518500249+c[e+4]<<0,a=a<<30|a>>>2;for(;e<40;e+=5)s=(t=(n=(t=(a=(t=(i=(t=(o=(t=s<<5|s>>>27)+(n^a^i)+o+1859775393+c[e]<<0)<<5|o>>>27)+(s^(n=n<<30|n>>>2)^a)+i+1859775393+c[e+1]<<0)<<5|i>>>27)+(o^(s=s<<30|s>>>2)^n)+a+1859775393+c[e+2]<<0)<<5|a>>>27)+(i^(o=o<<30|o>>>2)^s)+n+1859775393+c[e+3]<<0)<<5|n>>>27)+(a^(i=i<<30|i>>>2)^o)+s+1859775393+c[e+4]<<0,a=a<<30|a>>>2;for(;e<60;e+=5)s=(t=(n=(t=(a=(t=(i=(t=(o=(t=s<<5|s>>>27)+(n&a|n&i|a&i)+o-1894007588+c[e]<<0)<<5|o>>>27)+(s&(n=n<<30|n>>>2)|s&a|n&a)+i-1894007588+c[e+1]<<0)<<5|i>>>27)+(o&(s=s<<30|s>>>2)|o&n|s&n)+a-1894007588+c[e+2]<<0)<<5|a>>>27)+(i&(o=o<<30|o>>>2)|i&s|o&s)+n-1894007588+c[e+3]<<0)<<5|n>>>27)+(a&(i=i<<30|i>>>2)|a&o|i&o)+s-1894007588+c[e+4]<<0,a=a<<30|a>>>2;for(;e<80;e+=5)s=(t=(n=(t=(a=(t=(i=(t=(o=(t=s<<5|s>>>27)+(n^a^i)+o-899497514+c[e]<<0)<<5|o>>>27)+(s^(n=n<<30|n>>>2)^a)+i-899497514+c[e+1]<<0)<<5|i>>>27)+(o^(s=s<<30|s>>>2)^n)+a-899497514+c[e+2]<<0)<<5|a>>>27)+(i^(o=o<<30|o>>>2)^s)+n-899497514+c[e+3]<<0)<<5|n>>>27)+(a^(i=i<<30|i>>>2)^o)+s-899497514+c[e+4]<<0,a=a<<30|a>>>2;this.h0=this.h0+s<<0,this.h1=this.h1+n<<0,this.h2=this.h2+a<<0,this.h3=this.h3+i<<0,this.h4=this.h4+o<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,s=this.h2,n=this.h3,a=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,s=this.h2,n=this.h3,a=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,s>>24&255,s>>16&255,s>>8&255,255&s,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:root.sha1=exports})()})(sha1$1);const sha1=sha1$1.exports,getOnlyFansHash=(e,t,s)=>{let n=0;return t.forEach((t=>{n+=e.charCodeAt(t)})),Math.abs(n+s).toString(16)},apiFetch=async(e,t,s)=>{const n=JSON.parse((0,_local_storage_js__WEBPACK_IMPORTED_MODULE_3__.U2)("ch_config")),a=(new Date).getTime().toString(),i=[n.rules.static_param,a,e,n.account.id].join("\n"),o=sha1.hex(i),c=n.rules.start_param+":"+o+":"+getOnlyFansHash(o,n.rules.checksum_indexes,n.rules.checksum_constant)+":"+n.rules.end_param;return new Promise((i=>{fetch("https://onlyfans.com"+e,{headers:{accept:"application/json","user-agent":window.navigator.userAgent,"app-token":n.rules.app_token,sign:c,time:a,"user-id":n.account.id,"Content-Type":"application/json","x-bc":(0,_local_storage_js__WEBPACK_IMPORTED_MODULE_3__.U2)("bcTokenSha")},referrer:"https://onlyfans.com",referrerPolicy:"strict-origin-when-cross-origin",body:s?JSON.stringify(s):null,method:t,mode:"cors",credentials:"include"}).then((async e=>{if(401===e.status){let e=Number((0,_local_storage_js__WEBPACK_IMPORTED_MODULE_3__.U2)("rules_update_attempt"));(0,_local_storage_js__WEBPACK_IMPORTED_MODULE_3__.t8)("rules_update_attempt",e>=1?++e:1);const t=await(0,_api_js__WEBPACK_IMPORTED_MODULE_1__.D)({module:"auth",action:"rules"});if((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.rF)({rules:t.data.rules}),e&&e>1)throw(0,_toast_js__WEBPACK_IMPORTED_MODULE_2__.cB)("Authentication Error! Please connect with our support."),new Error("");throw window.location.reload(),new Error("")}return e.json()})).then((e=>{(0,_local_storage_js__WEBPACK_IMPORTED_MODULE_3__.Od)("rules_update_attempt"),i(e)})).catch((e=>{i({error:"API Error"})}))}))}},783:(e,t,s)=>{s.d(t,{cB:()=>i,t5:()=>a,uS:()=>o});var n=s(808);const a=(e="")=>{Swal.fire({title:"Success!",icon:"success",html:e||"",confirmButtonText:"Ok"})},i=(e="",t="error")=>{Swal.fire({title:"Error!",icon:t,html:e||"",confirmButtonText:"Ok"})},o=(e="")=>new Promise(((e,t)=>{Swal.fire({title:(0,n.$t)("delete_confirmation"),showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",confirmButtonText:(0,n.$t)("agree_to_delete"),cancelButtonText:(0,n.$t)("no")}).then((t=>{t.isConfirmed?e():t.isDenied&&Swal.fire("Changes are not saved","","info")}))}))},878:(e,t,s)=>{s.d(t,{$_:()=>x,AH:()=>a,BB:()=>v,C2:()=>k,CB:()=>g,Ef:()=>S,Ht:()=>w,JI:()=>c,Mr:()=>L,Nj:()=>o,Ok:()=>u,V5:()=>p,V_:()=>m,WR:()=>r,WY:()=>M,Xh:()=>d,Yh:()=>f,Yq:()=>l,e6:()=>_,f7:()=>b,hb:()=>y,hp:()=>E,lr:()=>H,xb:()=>B,yG:()=>h,zr:()=>i});var n=s(808);const a=e=>{var t=new XMLHttpRequest;return t.open("GET",chrome.runtime.getURL(e),!1),t.send(),t.responseText},i=e=>{const t="../../"+e,s=new XMLHttpRequest;return s.open("GET",chrome.runtime.getURL(t),!1),s.send(),JSON.parse(s.responseText)},o=(e,t)=>{document.getElementById(e).innerHTML=a("../../assets/html/app/tabs/"+t)},c=e=>a(`${e}.html`),r=(e=null)=>{let t;document.querySelectorAll(".tooltip.fade.show.bs-tooltip-end").forEach((e=>e.remove())),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach((s=>{t=null===e?s.parentNode.parentNode:document.querySelector(e),bootstrap.Tooltip.getOrCreateInstance(s,{container:t})}))},l=()=>{let e=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')),t=document.querySelector(".chathelper_panel");e.forEach((e=>{bootstrap.Popover.getOrCreateInstance(e,{container:t,html:!0,sanitize:!1}).hide()}))},d=(e,t)=>{1===t?(document.getElementById(e).innerHTML=' <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>  <span class="button-text">'+document.getElementById(e).innerHTML+"</span>",document.getElementById(e).setAttribute("disabled",!0)):(document.getElementById(e).innerHTML=document.getElementById(e).getElementsByClassName("button-text")[0].innerHTML,document.getElementById(e).removeAttribute("disabled"))},u=e=>{document.getElementById("chatHelperPanel").querySelectorAll(".ch-content").forEach((t=>{t.id!==e&&(t.classList.add("d-none"),t.classList.remove("show"))})),document.getElementById(e).classList.remove("d-none"),document.getElementById(e).classList.add("show"),setTimeout((()=>{r("#bs-5")}),2e3),l(),(0,n.UH)()},m=(e,t=!0)=>{t?document.querySelector(e).classList.remove("d-none"):document.getElementById(e).classList.remove("d-none")},p=e=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("d-none")))},h=(e,t,s=!0)=>{s?document.querySelector(e).innerHTML=t:document.getElementById(e).innerHTML=t},f=(e,t,s=!0)=>{s?document.querySelector(e).innerText=t:document.getElementById(e).innerHTML=t},_=(e,t=!0)=>{t?document.querySelector(e).classList.add("d-none"):document.getElementById(e).classList.add("d-none")},g=e=>e.replace(/<a([^>]*)href=/gi,"<a$1target='_blank' href="),b=(e,t)=>{for(let s=0;s<t.length;s++){let n=document.createElement("option");n.text=t[s].name,n.value=t[s].value,void 0!==t[s].disabled&&!0===t[s].disabled&&(n.disabled=!0),void 0!==t[s].selected&&!0===t[s].selected&&(n.selected=!0),e.add(n)}},y=e=>{let t=Math.floor(e/3600),s=Math.floor(e%3600/60),a=e%60,i="";return t>0&&(i+=`${t}${(0,n.$t)("h")}) `),s>0&&(i+=`${s}${(0,n.$t)("m")} `),(a>0||!i)&&(i+=`${a}${(0,n.$t)("s")}`),i},v=e=>{document.querySelectorAll(e).forEach((e=>e.classList.add("d-none")))},E=(e,t,s=!0)=>{s?(_(e),m(t)):(_(e,!1),m(t,!1))},M=e=>{let t;switch(document.querySelectorAll(".chathelper_logo, .chathelper_panel").forEach((e=>{e.classList.remove("position-top-right","position-top-left","position-bottom-right","position-bottom-left")})),e){case"top_right":t="position-top-right";break;case"top_left":t="position-top-left";break;case"bottom_right":t="position-bottom-right";break;case"bottom_left":t="position-bottom-left"}document.querySelectorAll(".chathelper_logo, .chathelper_panel").forEach((e=>{e.classList.add(t)}))},S=e=>{switch(document.querySelector(".container").classList.remove("container-left","container-right"),e){case"left":document.querySelector(".container").classList.add("container-left");break;case"right":document.querySelector(".container").classList.add("container-right")}},w=e=>{switch(document.querySelector(".chathelper_panel").classList.remove("size-small","size-medium","size-large"),e){case"medium":document.querySelector(".chathelper_panel").classList.add("size-medium");break;case"large":document.querySelector(".chathelper_panel").classList.add("size-large");break;default:document.querySelector(".chathelper_panel").classList.add("size-small")}},L=e=>{let t=document.getElementById(e);t.classList.remove("show"),t.style.display="none";const s=document.querySelector(".modal-backdrop");s&&s.remove(),document.body.style.overflow="",new bootstrap.Modal(document.getElementById(e),{}).dispose()},k=(e,t)=>{const s={plugins:[ChartDataLabels],type:"line",data:{datasets:[{label:"Price",data:t,borderColor:"rgb(0,0,0)",fill:!1,pointBackgroundColor:function(e){try{return e.raw.isOpened?"#35a1eb":"red"}catch(e){return"#35a1eb"}}}]},options:{animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,title:{display:!1},scales:{y:{ticks:{display:!1}}},layout:{padding:{top:40,left:20,right:20}},plugins:{tooltip:{backgroundColor:"white",bodyColor:"black",borderColor:"black",borderWidth:1,callbacks:{title:function(e){return e[0].dataset.data[e[0].dataIndex].title},label:function(e){try{return e.dataset.data[e.dataIndex].message.replace(/(<([^>]+)>)/gi,"").match(/.{1,25}/g).slice(0,4)}catch(e){return""}}},displayColors:!1,titleColor:"black",xAlign:"center",yAlign:"top"},datalabels:{offset:8,anchor:"end",color:"#000",backgroundColor:"#fff",borderColor:"#000",borderWidth:1,borderRadius:5,align:"top",padding:3,font:{weight:"bold"},formatter:function(e,t){return"$"+(0,n.eH)(e.y)}},legend:{display:!1,labels:{usePointStyle:!0}}}}};let a=Chart.getChart(e);void 0!==a&&a.destroy();new Chart(document.getElementById(e),s)},B=e=>""===e||null==e,x=e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(function(e){return t[e]}))},H=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](s,s.exports,__webpack_require__),s.exports}__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var e=__webpack_require__(56),t=__webpack_require__(808),s=__webpack_require__(776),n=__webpack_require__(199),a=__webpack_require__(268),i=__webpack_require__(329),o=__webpack_require__(686),c=__webpack_require__(60),r=__webpack_require__(783),l=__webpack_require__(878),d=__webpack_require__(76);const u=()=>{(0,c.Sv)("chat","special_lists").then((e=>{!function(){const e=q(),t=e.lists,s=e.ofAccountDialogLists;let n="";t.forEach((e=>{let t=e.id in s&&!0===s[e.id];n+=`\n\t\t<div class="form-group mb-3">\n\t\t\t<div class="form-check form-switch">\n\t\t\t\t<input class="form-check-input form-check-input-special-lists" ${t?"checked":""} type="checkbox" role="switch" id="special-list-${e.id}" value="${e.id}">\n\t\t\t\t<label class="form-check-label" for="special-list-${e.id}">${e.name}</label>\n\t\t\t</div>\n\t\t</div>`})),(0,l.yG)("special-list-modal-body",n,!1)}(),function(e){const t=e.querySelectorAll(".form-check-input-special-lists");t.forEach((function(t){t.addEventListener("click",(async function(){let s={list_id:t.value,is_active:t.checked};const n=e.querySelector(".refresh-section");try{await(0,d.D)({module:"dialogs",action:"lists"},s);let e=new CustomEvent("addToLists",{cancelable:!0,detail:s});document.dispatchEvent(e),n.classList.remove("d-none"),n.addEventListener("click",(()=>{window.location.reload()}))}catch(e){n.classList.add("d-none")}}))}))}(e)})).catch((e=>{console.error(e)}))};const m=chrome.runtime.getURL("assets/img/chatGPT.png"),p=chrome.runtime.getURL("assets/img/loading.gif"),h=(e,t,s=null,n=!0)=>`<div class="p-0" style="height: 19px" id="${e}-color-btn">\n           ${n?f(e,t,s):_(e,t)}\n    </div>`,f=(e,t,s)=>` <button\n            type="button"\n            class="btn btn-secondary dropdown-toggle p-0 operator-color-btn"\n        >\n            <span\n                data-bs-toggle="tooltip"\n                class="ch-dialog-row-color"\n                id="${e}-dialog-bg-color"\n                title="Operator: ${s??"empty name"}"\n                style="background-color:${t}"\n                data-bs-placement="left"\n            ></span>\n        </button>\n    `,_=(e,t)=>` <button\n            type="button"\n            class="btn btn-secondary dropdown-toggle p-0 set-operator-color operator-color-btn"\n            data-user-id="${e}"\n            id="${e}-color"\n        >\n            <span\n                data-bs-toggle="tooltip"\n                class="ch-dialog-row-color"\n                id="${e}-dialog-bg-color"\n                style="background-color:${t}"\n            ></span>\n        </button>\n    `;(0,t.iE)();let g=(0,t.Gw)(),b={},y=[],v=!1;chrome.runtime.getURL("assets/img/chatGPT.png"),chrome.runtime.getURL("assets/img/loading.gif");let E={},M=[],S={};g.operator_name;async function w(e=!1){const t=await async function(){return(await(0,d.D)({module:"chat",action:"models"})).data}();let s="";for(const e in t.models)s+=`\n            <button type="button" class="aiVariants ch-white-space-nowrap" data-id="${t.models[e].id}" data-prompt="${t.models[e].prompt}" data-type="${t.models[e].type}">\n                <span class="pointer-events-none drop-down-button-span">\n                \t<span class="icon-wrapper">\n                \t\t<i class="${t.models[e].icon}"></i>\n\t\t\t\t\t</span>\n                \t<span class="icon-text">\n\t\t\t\t\t\t${t.models[e].type}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n            </button>\n                `;document.querySelectorAll(".aiVariants").forEach((e=>{e.remove()})),document.getElementById("chatgpt-dropdown").insertAdjacentHTML("afterbegin",s),e&&(0,r.t5)(),x()}document.addEventListener("addToLists",(function(e){S[e.detail.list_id]=e.detail.is_active}));const L=async()=>{let e;if(void 0!==g.settings&&void 0!==g.settings.emojis){if(null===g.settings.emojis||""===g.settings.emojis||0===g.settings.emojis.length)return;s=g.settings.emojis,e=[...(new Intl.Segmenter).segment(s)].map((e=>e.segment))}else e=["🥰","🍆","💦","😍","❤️","🤤","🔥","😈","😘","💗","🙈","🔞","😽","😹","😅","😪","😭","💞","🥺","🤐","🥵","😏","💕","🤝","😱","😉","🤬","👅","💋","😻","😼","🔥","💥","✨","💫","🍑","🍒","🍌","🍓"];var s;if(0===e.length)return;let n='<div id="ch-emoji-bar"><div class="ch-emoji-bar-wrapper">';e.forEach((e=>{n+='<button class="ch-emoji-bar-button" type="button">'+e+"</button>"})),n+="</div></div>";if(!document.querySelector(".m-chats-footer"))return;document.querySelector(".m-chats-footer").insertAdjacentHTML("afterbegin",n);document.querySelector(".m-chats-footer").querySelectorAll(".ch-emoji-bar-button").forEach((e=>{e.addEventListener("click",(s=>{(0,t.vf)(e.innerText,!1,!1,"new_post_text_input")}))}))},k=async()=>{let e=[];document.querySelectorAll(".swipeout-list .b-chats__item").forEach((t=>{"load"in t.dataset||"marked"in t.dataset||(e.push(t.getAttribute("id")),t.dataset.load="")})),e.length>0&&async function(e){let s=await(0,d.D)({module:"dialogs",action:"index"});S=s.data.dialog_lists,n=s.data.dialog_colors,n.forEach(((e,t)=>{y[e.of_user_id]=e}));var n;const a=e.map((e=>`x[]=${e}`)).join("&");let i=await(0,o.W)("/api2/v2/users/list?"+a,"GET",null);await async function(){M=await(0,o.W)("/api2/v2/lists?offset=0&limit=100","GET",null)}(),Object.keys(i).forEach((e=>{b[e]=i[e],async function(e){if(void 0===b[e])return;let s=document.getElementById(e);const n=(0,t.Gw)();if(null===s)return;if("marked"in s.dataset)return;s.dataset.marked="";let a="",i="",o="",c="",u="",m="";if(null!==b[e].subscribedOnData&&(void 0!==b[e].subscribedOnData&&void 0!==b[e].subscribedOnData.totalSumm&&(a=b[e].subscribedOnData.totalSumm>1e3?'<div class="ch-label-spending purple">$'+(0,t.eH)(b[e].subscribedOnData.totalSumm)+"</div>":b[e].subscribedOnData.totalSumm>100?'<div class="ch-label-spending blue">$'+(0,t.eH)(b[e].subscribedOnData.totalSumm)+"</div>":b[e].subscribedOnData.totalSumm>0?'<div class="ch-label-spending green">$'+(0,t.eH)(b[e].subscribedOnData.totalSumm)+"</div>":'<div class="ch-label-spending">$'+(0,t.eH)(b[e].subscribedOnData.totalSumm)+"</div>"),void 0!==b[e].subscribedOnData.subscribes[0]&&null===b[e].subscribedOnData.renewedAt&&b[e].subscribedOnData.price>0&&(c='<div class="ch-label-status" style="background:rgb(238, 193, 66); border:1px solid rgb(238, 193, 66);">&nbsp;</div>'),void 0!==typeof b[e].subscribedOnData.subscribeAt&&void 0!==typeof b[e].subscribedOnData.expiredAt)){let s=Date.now(),n=Date.parse(b[e].subscribedOnData.subscribeAt);Date.parse(b[e].subscribedOnData.expiredAt)<s&&(c='<div class="ch-label-status" style="background: rgb(236, 64, 122); border: 1px solid rgb(236, 64, 122);">&nbsp;</div>'),n>s-6048e5&&(i='<div class="ch-label-new">NEW</div>'),o='<div class="ch-label-duration">'+(0,t.Kv)(n)+"</div>"}let p=b[e],_=p?.listsStates||[];_=_.filter((e=>e.hasUser)),_.length&&(m=function(e){let t="";return e.forEach((e=>{e.id in S&&!0===S[e.id]&&(t+=` \n \t\t\t\t<div class="ch-label-spending ch-label-groups">\n\t\t\t\t\t${e.name}\n\t\t\t\t</div>\n\t\t\t`)})),t}(_));let g=e in y,v=g?y[e].color:"#8590A2";u=g&&y[e].of_operator_id!==Number(n.operator_id)?h(e,v,y[e].operator_name,!0):h(e,v,null,!1),s.querySelector(".b-chats__item__link").insertAdjacentHTML("beforeend",`\n\t\t\t<div class="ch-chat-tags">\n\t\t\t\t${a}${i}${c}${o}${m}${u}\n\t\t\t</div>\n\t\t\t`);let E=document.querySelector(`.dropright-${e}`);E&&E.addEventListener("click",(function(e){const t=this.querySelector(".dropdown-menu");var s;s=t,document.querySelectorAll(".dropdown-menu").forEach((e=>{s!==e&&e.classList.remove("show")})),t.classList.toggle("show")}));(0,l.WR)(),document.querySelectorAll(".set-operator-color").forEach((e=>{e.addEventListener("click",(async function(e){e.preventDefault(),e.stopImmediatePropagation();let s=(0,t.Gw)();if(!s.operator_id||0===Number(s.operator_id))return void(0,r.cB)((0,t.$t)("please_choose_the_operator"));let n={of_user_id:this.getAttribute("data-user-id"),operator_id:s.operator_id};const a=await async function(e){try{return await(0,d.D)({module:"dialogs",action:"store"},e)}catch(e){(0,r.cB)(e.message)}}(n);if("exists"===a.status){const e=a.data.dialog;return document.getElementById(`${e.of_user_id}-color-btn`).innerHTML=f(e.of_user_id,e.color,e.operator_name),(0,l.WR)(),void(0,r.cB)(a.message)}document.getElementById(`${a.data.dialog.of_user_id}-dialog-bg-color`).style.backgroundColor=a.data.dialog.color}))}))}(e)}))}(e)};async function B(){if(document.querySelector("#chatGPTBtn"))return;const e=document.querySelector(".b-make-post__actions__btns"),s=`\n        <div class="dropdown">\n            <button\n            \tclass="dropbtn g-btn m-flat m-gray m-with-round-hover m-size-md-hover m-default-icon-size m-reset-width has-tooltip size-lg-hover m-width-fluid-hover" \n            \tid="chatGPTBtn"\n            \ttype="button"\n            >\n            <span style="pointer-events: none">\n                <img\n                    alt="${m}"\n                    src="${m}" \n                    width="18" \n                    class="rounded"\n                /> \n                    <span id="aiName">ChatGPT</span>\n                    <img\n                        style="display:none"\n                        id="loadingGif"\n                        alt="${p}"\n                        width="35px"\n                        src="${p}" \n                        class="rounded" \n                    />\n                 </span>\n            </button>\n            <div id="chatgpt-dropdown" class="ch-dropdown-content">\n\t\t\t\t<div style="width:95%;background-color: #dfdddd;height:1px;margin: 0 auto;"></div>\n\t\t\t\t<button type="button" id="getOpenaiSettingsModal">\n\t\t\t\t\t<span class="pointer-events-none">\n\t\t\t\t\t\t<span class="icon-wrapper">\n\t\t\t\t\t\t\t<i class="fa fa-pencil"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="icon-text" data-locale-key="settings">\n\t\t\t\t\t\t\tSettings\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>`;e.insertAdjacentHTML("afterend",s),await w(),document.getElementById("chatGPTBtn").addEventListener("click",(function(){(0,t.$p)(),document.getElementById("chatgpt-dropdown").classList.toggle("show")})),document.getElementById("getOpenaiSettingsModal").addEventListener("click",(function(){H(),E={}})),x()}function x(){document.querySelectorAll(".aiVariants").forEach((e=>{e.addEventListener("click",(async function(e){if(v)return;v=!0,document.getElementById("chatGPTBtn").disabled=!0,document.getElementById("chatgpt-dropdown").classList.toggle("show"),document.querySelector("#aiName").style.display="none",document.querySelector("#loadingGif").style.display="inline-block";const s=e.target.dataset.type,n=(0,a.U2)("peer_id");try{const e=await(0,o.W)(`/api2/v2/chats/${n}/messages?limit=10&order=desc&skip_users=all`,"GET"),a=await(0,d.D)({module:"chat",action:"advice"},{type:s,messages:e});if(!a.data.answer||!a.data.answer.length)throw new Error("Empty answer from openai");(0,t.vf)(a.data.answer,!1,!0,"new_post_text_input")}catch(e){(0,r.cB)(e.message)}finally{v=!1,document.getElementById("chatGPTBtn").disabled=!1,document.querySelector("#aiName").style.display="inline-block",document.querySelector("#loadingGif").style.display="none"}}))}))}const H=async()=>{const e=await(0,d.D)({module:"chat",action:"openai_settings"});await(0,c.jB)(e.data.modal);document.querySelector("#addNewOpenaiSettingBtn")&&document.getElementById("addNewOpenaiSettingBtn").addEventListener("click",(async function(){const e=await(0,d.D)({module:"chat",action:"prompt_edit_form"});document.getElementById("openaiEditForm").innerHTML=e.data.form,I(),document.getElementsByClassName("iconBtns")[0].click(),document.getElementById("saveOpenaiSettings").addEventListener("click",(async e=>{try{let e=T();await(0,d.D)({module:"chat",action:"openai_settings_store"},e),await H(),await w(!0)}catch(e){(0,r.cB)(e.message,"info")}}))}));document.querySelectorAll(".editOpenaiBtns").forEach((e=>{e.addEventListener("click",(async e=>{const t=e.target.dataset.openaiId,s=await(0,d.D)({module:"chat",action:"prompt_edit_form"},{id:t});document.getElementById("openaiEditForm").innerHTML=s.data.form;let n=document.getElementById("openaiEditForm").querySelector(".active");E.icon=n.getAttribute("data-icon"),I(),document.getElementById("updateExistingOpenaiSettings").addEventListener("click",(async function(){try{let e=T();await(0,d.D)({module:"chat",action:"openai_settings_update"},e),await H(),await w(!0)}catch(e){(0,r.cB)(e.message,"info")}}))}))}));document.querySelectorAll(".destroyOpenaiSettingBtns").forEach((e=>{e.addEventListener("click",(async e=>{const t=e.target.dataset.openaiId;try{await(0,r.uS)(),await(0,d.D)({module:"chat",action:"openai_destroy"},{id:t}),await H(),await w(!0)}catch(e){(0,r.cB)(e.message,"info")}}))}))};function T(){return E.type=document.getElementById("openaiForm").querySelector('input[name="type"]').value,E.sort=document.getElementById("openaiForm").querySelector('input[name="sort"]').value,E.prompt=document.getElementById("openaiForm").querySelector('textarea[name="prompt"]').value,E.model_id=document.getElementById("openaiForm").querySelector('select[name="model_id"]').value,E.openai_id=document.getElementById("openaiForm").querySelector('input[name="openai_id"]').value,E}function I(){const e=document.getElementsByClassName("iconBtns");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(t){E.icon=t.target.dataset.icon;for(let t=0;t<e.length;t++)e[t].classList.remove("active");this.classList.add("active")}))}const q=()=>({lists:M,ofAccountDialogLists:S});(0,t.iE)(),(0,t.Gw)();let O={},$=[];async function C(){if(document.querySelector("#templateBtn"))return;const e=document.querySelector(".b-make-post__actions__btns"),s=await(async()=>'\n        <div class="dropdown">\n            <button \n            \tstyle="margin:0;padding:6px" \n            \tclass="dropbtn g-btn m-flat m-gray m-with-round-hover m-size-md-hover m-default-icon-size m-reset-width has-tooltip size-lg-hover m-width-fluid-hover" \n            \tid="templateBtn"\n            \ttype="button"\n            >\n            <span class="pointer-events-none">\n\t\t\t\t<svg \n\t\t\t\t\tfill="none" \n\t\t\t\t\theight="24" \n\t\t\t\t\tviewBox="0 0 24 24" \n\t\t\t\t\twidth="24" \n\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\tclass="ch-svg-icon"\n\t\t\t\t>\n\t\t\t\t\t<path d="M2 5.25C2 3.45507 3.45507 2 5.25 2H15.75C17.5449 2 19 3.45507 19 5.25V10.0072C18.9173 10.0024 18.8339 10 18.75 10H17.5V5.25C17.5 4.2835 16.7165 3.5 15.75 3.5H5.25C4.2835 3.5 3.5 4.2835 3.5 5.25V16.75C3.5 17.7165 4.2835 18.5 5.25 18.5H6V18.75C6 19.185 6.06536 19.6048 6.1868 20H5.25C3.45508 20 2 18.5449 2 16.75V5.25ZM6.75 5C6.33579 5 6 5.33579 6 5.75C6 6.16421 6.33579 6.5 6.75 6.5H14.25C14.6642 6.5 15 6.16421 15 5.75C15 5.33579 14.6642 5 14.25 5H6.75ZM8 8.25C8 7.83579 8.33579 7.5 8.75 7.5H14.25C14.6642 7.5 15 7.83579 15 8.25C15 8.66421 14.6642 9 14.25 9H8.75C8.33579 9 8 8.66421 8 8.25ZM7 14.25C7 12.4551 8.45507 11 10.25 11H18.75C20.5449 11 22 12.4551 22 14.25V18.75C22 20.5449 20.5449 22 18.75 22H10.25C8.45507 22 7 20.5449 7 18.75V14.25ZM10.25 12.5C9.74571 12.5 9.29124 12.7133 8.9719 13.0546L14.5001 16.6084L20.0281 13.0546C19.7088 12.7133 19.2543 12.5 18.75 12.5H10.25ZM8.5 18.75C8.5 19.7165 9.2835 20.5 10.25 20.5H18.75C19.7165 20.5 20.5 19.7165 20.5 18.75V14.5345L14.9056 18.1309C14.6586 18.2897 14.3415 18.2897 14.0945 18.1309L8.5 14.5345V18.75Z" fill="#8a96a3"/>\n\t\t\t\t</svg>\n            \t<span id="aiName"></span>\n\t\t\t</span>\n            </button>\n            <div id="template-dropdown" class="ch-dropdown-content">\n\t\t\t\t<button type="button" id="getTemplateModal" style="border-top:1px solid #dfdddd;column-span: all;">\n\t\t\t\t\t<span class="pointer-events-none">\n\t\t\t\t\t\t<span class="icon-wrapper">\n\t\t\t\t\t\t\t<i class="fa fa-pencil"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="icon-text" data-locale-key="settings">\n\t\t\t\t\t\t\tSettings\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>')();e.insertAdjacentHTML("afterend",s),await A(),document.getElementById("templateBtn").addEventListener("click",(function(){(0,t.$p)(),document.getElementById("template-dropdown").classList.toggle("show")})),document.getElementById("getTemplateModal").addEventListener("click",(function(){P(),O={}})),N()}async function A(e=!1){const t=await async function(){return(await(0,d.D)({module:"template",action:"index"})).data}();$=t.templates;let s="";for(const e in t.templates)s+=`\n            <button type="button" class="template-items ch-white-space-nowrap" data-template-id="${t.templates[e].id}">\n                <span class="pointer-events-none drop-down-button-span">\n                \t<span class="icon-wrapper">\n                \t\t<i class="${t.templates[e].icon}"></i>\n                \t</span>\n                \t<span class="icon-text">\n\t\t\t\t\t\t${t.templates[e].title}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n            </button>\n                `;document.querySelectorAll(".template-items").forEach((e=>{e.remove()})),document.getElementById("template-dropdown").insertAdjacentHTML("afterbegin",s),function(e){e.length>10&&(document.querySelector(".ch-dropdown-content").style.columnCount=2,document.querySelector(".ch-dropdown-content").style.columnGap="10px")}($),e&&(0,r.t5)(),N()}function N(){document.querySelectorAll(".template-items").forEach((e=>{e.addEventListener("click",(async function(e){e.preventDefault(),e.stopImmediatePropagation();try{let s=e.target.dataset.templateId,n=function(e){return $.find((t=>t.id===Number(e)))}(s);if(!n)throw new Error("Undefined template");(0,t.vf)(n.body,!1,!0,"new_post_text_input"),await(0,d.D)({module:"template",action:"increment"},{id:s})}catch(e){(0,r.cB)(e.message)}}))}))}function D(){return O.template_id=document.getElementById("templateModal").querySelector('input[name="template_id"]').value,O.title=document.getElementById("templateModal").querySelector('input[name="title"]').value,O.body=document.getElementById("templateModal").querySelector('textarea[name="body"]').value,O.sort=document.getElementById("templateModal").querySelector('input[name="sort"]').value,O}const P=async()=>{const e=await(0,d.D)({module:"template",action:"modal"});await(0,c.jB)(e.data.modal);const t=document.querySelector("#addTemplateBtn");t&&t.addEventListener("click",(async function(){const e=await(0,d.D)({module:"template",action:"addForm"});(0,l.yG)("templateEditForm",e.data.form,!1),F(),await j(),document.getElementsByClassName("iconBtns")[0].click(),document.getElementById("saveTemplate").addEventListener("click",(async e=>{try{let e=D();await(0,d.D)({module:"template",action:"store"},e),await P(),await A(!0)}catch(e){(0,r.cB)(e.message,"info")}}))}));document.querySelectorAll(".editTemplateBtns").forEach((e=>{e.addEventListener("click",(async e=>{const t=e.target.dataset.templateId,s=await(0,d.D)({module:"template",action:"editForm"},{id:t});(0,l.yG)("templateEditForm",s.data.form,!1);let n=document.getElementById("templateEditForm").querySelector(".active");O.icon=n.getAttribute("data-icon"),F(),await j(),document.getElementById("updateTemplate").addEventListener("click",(async function(){try{let e=D();await(0,d.D)({module:"template",action:"update"},e),await P(),await A(!0)}catch(e){(0,r.cB)(e.message,"info")}}))}))}));document.querySelectorAll(".destroyTemplateBtns").forEach((e=>{e.addEventListener("click",(async e=>{const t=e.target.dataset.templateId;try{await(0,r.uS)(),await(0,d.D)({module:"template",action:"destroy"},{id:t}),await P(),await A(!0)}catch(e){(0,r.cB)(e.message,"info")}}))}))};function F(){const e=document.getElementsByClassName("iconBtns");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(t){O.icon=t.target.dataset.icon;for(let t=0;t<e.length;t++)e[t].classList.remove("active");this.classList.add("active")}))}const j=async()=>{const e=document.querySelector("#templateBody").querySelectorAll(".ch-template-emoji-bar-button");document.getElementById("templateBody");e.forEach((e=>{e.addEventListener("click",(s=>{(0,t.vf)(e.innerText,!1,!1,"templateBodyTextarea")}))}))};var U=__webpack_require__(360);let R=(0,t.Gw)(),G=null;const z=a=>{G!==a&&(G=a,void 0!==a.detail.url&&void 0!==a.detail.data&&function(a,o){let c=a.split("/");if(-1!==a.indexOf("/api2/v2/users/me")&&c.includes("me")){void 0!==o.id&&(0,n.q)(o.id);let e=(0,t.iE)();void 0!==o.name&&(null!==e.account&&void 0!==e.account&&void 0!==e.account.id&&""!==e.account.id&&Number(o.id)!==Number(e.account.id)&&(0,t.w7)(),async function(e){let t=document.getElementById("ofAccountName");t&&(t.innerHTML=e.name);await(0,s.$N)(),(0,U.D)(),(0,s.K2)()}(o))}-1!==a.indexOf("/api2/v2/users/logout")&&((0,n.q)(0),(0,s.$N)(),(0,e.S)());if(!(0,s.K2)()||!(0,t.C2)())return;-1!==a.indexOf("/api2/v2/users/list?m[]=")&&((0,i.BD)(o),-1!==window.location.href.indexOf("/my/chats/chat/")&&(0,i.t0)());-1!==a.indexOf("/api2/v2/users/")&&void 0!==o.id&&(0,i.BD)(o);-1!==a.indexOf("/api2/v2/vault/media?limit=24&offset=")&&(0,i.ot)(o);W(window.location.href)}(a.detail.url,JSON.parse(a.detail.data)))},W=e=>{if(!(0,s.K2)()||!(0,t.C2)())return;const n=function(e){let t=new URL(e);return t.paths=t.pathname.split("/"),t}(e);if(-1!==n.pathname.indexOf("/my/chats/chat/")){const e=n.paths[4];(0,i.Xz)(e),(0,a.t8)("peer_id",e),(0,i.t0)()}},V=e=>{(0,s.K2)()&&(0,t.C2)()&&(e.nodeType===Node.ELEMENT_NODE&&e.querySelector("div > .container")&&(void 0!==R.settings&&void 0!==R.settings.site_position?(0,l.Ef)(R.settings.site_position):(0,l.Ef)("left")),e.nodeType===Node.ELEMENT_NODE&&e.querySelector("#attach_file_photo")&&L(),e.nodeType===Node.ELEMENT_NODE&&e.querySelector("#attach_file_photo")&&window.location.href.includes("my/chats")&&B(),e.nodeType===Node.ELEMENT_NODE&&e.querySelector("#attach_file_photo")&&window.location.href.includes("my/chats")&&(C(),(0,t.UH)()),e.nodeType===Node.ELEMENT_NODE&&e.querySelector('div[at-attr="users_lists"]')&&(0,i.Xn)(),e.nodeType===Node.ELEMENT_NODE&&e.querySelector("div.b-photos__item")&&setTimeout((()=>{(0,i.Jg)()}),2e3),e.nodeType===Node.ELEMENT_NODE&&e.matches(".b-photos__item")&&(0,i.Jg)(),(e.nodeType===Node.ELEMENT_NODE&&e.querySelector("div.swipeout")||e.nodeType===Node.ELEMENT_NODE&&e.matches(".swipeout")||e.nodeType===Node.ELEMENT_NODE&&e.matches(".b-chats__item"))&&k(),e.nodeType===Node.ELEMENT_NODE&&e.matches(".swipeout-list")&&(async()=>{if(null===document.querySelector(".ch-label-legend")){let e='\n\t\t\t<div class="ch-label-legend">\n\t\t\t\t<div class="ch-legend-style" data-reactroot="">\n    \t\t\t\t<div class="ch-hover-info">\n    \t\t\t\t\t<button class="g-btn m-flat" type="button"><i class="fa fa-info-circle"></i> Labels Info</button>\n    \t\t\t\t\t<div class="ch-info-block">\n   \t \t\t\t\t\t<div>\n   \t \t\t\t\t\t\t<div class="ch-label-spending" style="font-size:10px;min-width:42px;margin-left:2px">$100</div>= spent</div><br/>\n\t\t\t\t\t\t\t<div><div class="ch-label-new" style="font-size:10px">NEW</div>&lt; 7d old</div><br/>\n\t\t\t\t\t\t\t<div><div class="ch-label-status" style="background:rgb(236, 64, 122);padding:0px 4.5px;border:1px solid rgb(236, 64, 122);font-size:9px">&nbsp;</div>= expired</div><br/>\n\t\t\t\t\t\t\t<div><div class="ch-label-status" style="background:rgb(238, 193, 66);padding:0px 4.5px;border:1px solid rgb(238, 193, 66);font-size:9px">&nbsp;</div>= rebill off</div></br>\n\t\t\t\t\t\t\t<div><div class="ch-label-duration">2 months</div>= subscribe duration</div>\n\t\t\t\t\t\t</div>\n    \t\t\t\t</div>\n    \t\t\t\t<div class="mr-2">\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclass="nav-link panel-tab-link float-right" \n\t\t\t\t\t\t\thref="#"\n\t\t\t\t\t\t\tid="specialListBtn"\n\t\t\t\t\t\t\ttype="button"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class="fa-regular fa-gear"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>';document.querySelector(".b-users-lists-wrapper").insertAdjacentHTML("afterbegin",e),document.querySelector("#specialListBtn").addEventListener("click",(function(){u()}))}})())};let X=window.location.href;chrome.runtime.onMessage.addListener((async function(e){return"change-url"===e.method&&W(e.url),e.method,!0})),chrome.runtime.sendMessage({method:"inject-scripts"});let Y,K,J=Date.now();async function Z(){W(X),document.addEventListener("xmlrequests",(function(e){z(e)})),K=setInterval((async function(){J=Date.now(),await chrome.runtime.sendMessage({method:"trash"})}),1e4),Y=setInterval((async function(){let e=(0,t.iE)();if(void 0!==e.account&&null!==e.account&&void 0!==e.account.id&&void 0!==e.auth&&null!==e.auth&&void 0!==e.auth.id){let s=await(0,d.D)({module:"auth",action:"check"},{static_param:e.rules.static_param});s.rules.length&&(0,t.rF)({rules:s.rules}),void 0!==s.status&&"success"===s.status||(0,t.w7)()}}),3e5)}new MutationObserver(((e,t)=>{e.forEach((e=>{e.addedNodes.forEach((e=>{X!==window.location.href&&(X=window.location.href,W(X)),V(e),Date.now()-J>6e4&&(Y&&clearInterval(Y),K&&clearInterval(Y),console.log("Background restarting after idle"),Z())}))}))})).observe(document,{childList:!0,subtree:!0}),(0,e.j)(),Z()})()})();